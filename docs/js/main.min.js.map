{"version":3,"sources":["src/js/main.js","../../src/js/common/scroll/scroll.service.js","../../src/js/app.component.js","../../src/js/common/alt/alt.directive.js","../../src/js/common/intersection/intersection.service.js","../../src/js/common/appear/appear.directive.js","../../src/js/common/click-outside/click-outside.directive.js","../../src/js/common/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/environment.served.js","../../src/js/common/date/date.pipe.js","../../src/js/common/download/download.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.service.js","../../src/js/common/dropdown/dropdown.directive.js","../../src/js/common/dropdown/dropdown-item.directive.js","../../src/js/common/ellipsis/ellipsis.directive.js","../../src/js/common/env/env.pipe.js","../../src/js/common/filter/filter-item.component.js","../../src/js/common/flag/flag.pipe.js","../../src/js/common/highlight/highlight.pipe.js","../../src/js/common/html/html.pipe.js","../../src/js/common/id/id.directive.js","../../src/js/common/label-for/label-for.directive.js","../../src/js/common/label/label.pipe.js","../../src/js/common/modal/modal.service.js","../../src/js/common/modal/modal-outlet.component.js","../../src/js/common/name/name.directive.js","../../src/js/common/number/number.pipe.js","../../src/js/common/relative-date/relative-date.pipe.js","../../src/js/common/scroll/scroll-sticky.directive.js","../../src/js/common/scroll/scroll.directive.js","../../src/js/common/share/share.directive.js","../../src/js/common/slug/slug.pipe.js","../../src/js/common/svg/svg-icon.structure.js","../../src/js/common/swiper/swiper.directive.js","../../src/js/common/thron/thron.service.js","../../src/js/common/thron/thron.component.js","../../src/js/common/title/title.directive.js","../../src/js/common/common.module.js","../../src/js/controls/control.component.js","../../src/js/controls/control-checkbox.component.js","../../src/js/common/keyboard/keyboard.service.js","../../src/js/controls/control-custom-select.component.js","../../src/js/controls/control-email.component.js","../../src/js/controls/control-file.component.js","../../src/js/controls/control-password.component.js","../../src/js/controls/control-privacy.component.js","../../src/js/controls/control-search.component.js","../../src/js/controls/control-text.component.js","../../src/js/controls/control-textarea.component.js","../../src/js/controls/errors.component.js","../../src/js/controls/test.component.js","../../src/js/controls/controls.module.js","../../src/js/partials/swiper-main/swiper-main.directive.js","../../src/js/shared/error/error.component.js","../../src/js/shared/menu/menu.service.js","../../src/js/shared/header/header.service.js","../../src/js/shared/header/header.component.js","../../src/js/common/location/location.service.js","../../src/js/shared/newsletter-proposition/newsletter-proposition.component.js","../../src/js/shared/switch/switch.component.js","../../src/js/common/gtm/gtm.service.js","../../src/js/common/http/http.service.js","../../src/js/common/language/language.service.js","../../src/js/common/api/api.service.js","../../src/js/common/storage/session-storage.service.js","../../src/js/shared/user/user.service.js","../../src/js/shared/user/user-delete.component.js","../../src/js/shared/user/user-detail.component.js","../../src/js/shared/user/user-edit-password.component.js","../../src/js/controls/form.service.js","../../src/js/controls/required-if.validator.js","../../src/js/shared/user/user-edit.component.js","../../src/js/shared/user/user-forgot.component.js","../../src/js/shared/user/user.component.js","../../src/js/shared/user/user-modal.component.js","../../src/js/shared/user/user-signin.component.js","../../src/js/controls/match.validator.js","../../src/js/shared/user/user-signup.component.js","../../src/js/shared/shared.module.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","ScrollService","scroll","scroll$","next","init$","node","previousY","window","pageYOffset","event","direction","x","y","speed","fromEvent","pipe","first","delay","switchMap","_","startWith","map","scrollTo","options","offset","body","document","querySelector","currentTop","scrollTop","distance","getBoundingClientRect","top","pow","gsap","set","scroll-behavior","disableLerp","to","duration","Math","abs","ease","Quad","easeOut","overwrite","onUpdate","onComplete","scrollToSelector","selector","ReplaySubject","AppComponent","_Component","apply","arguments","onInit","getContext","classList","remove","console","log","takeUntil","unsubscribe$","subscribe","Component","meta","AltDirective","_Directive","onChanges","setAttribute","alt","Directive","inputs","IntersectionService","observer","_this","observer_","readySubject_","BehaviorSubject","observerSubject_","Subject","IntersectionObserver","entries","root","rootMargin","threshold","intersection$","observe","find","entry","filter","undefined","finalize","unobserve","of","AppearDirective","add","intersectionRatio","ClickOutsideDirective","initialFocus","_getContext","parentInstance","event$","contains","shareReplay","expression","getAttribute","outputFunction","makeFunction","resolve","clickOutside$","Utils","merge","source","keys","forEach","Array","isArray","NODE","BASE_HREF","get","URLSearchParams","location","search","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","_proto","assign","getAbsoluteUrl","path","params","url","origin","replace","getPath","isLocal","href","githubDocs","defaultOptions","flags","production","heroku","slug","markets","defaultMarket","currentMarket","languages","defaultLanguage","currentLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","required","select_file","update","upload","drag_and_drop_images","environmentOptions","cart","api","assets","configureProduct","reservedArea","template","modal","careersModal","genericModal","marketsAndLanguagesModal","materialsModal","ordersModal","projectsRegistrationModal","userModal","facebook","appId","fields","scope","tokenClient","version","google","clientId","linkedIn","clientSecret","googleMaps","apiKey","thron","workers","image","prefetch","environment","DatePipe","_Pipe","transform","language","Intl","DateTimeFormat","format","Date","Pipe","name","DownloadDirective","download","LocomotiveScrollService","init","useKeyboard","smoothMobile","inertia","smooth","lerp","getDirection","getSpeed","initClass","scrollingClass","draggingClass","smoothClass","scrollbarContainer","scrollbarClass","multiplier","firefoxMultiplier","touchMultiplier","scrollFromAnywhere","gestureDirection","reloadOnContextChange","resetNativeScroll","el","useLocomotiveScroll","instance","LocomotiveScroll","innerWidth","isTouchDevice","userAgent","navigator","toLowerCase","isTablet","test","isSmartphone","isMacLike","platform","isIOS","isMacOs","isSafari","vendor","match","showefy","on","style","pointerEvents","addEventListener","stop","start","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","id","addDocumentListeners","dropped","removeDocumentListeners","getValue","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","outputs","DropdownItemDirective","enter$","leave$","tap","EllipsisDirective","originalText","innerText","resize$","text","scrollHeight","offsetHeight","words","pop","join","EnvPipe","keypath","env","k","shift","FilterItemComponent","closeFilter","active","change","toggleFilter","filters","clearFilter","preventDefault","stopImmediatePropagation","clear","onEnter","onLeave","FlagPipe","HighlightPipe","query","escapedQuery","escapeRegexChars","regExp","RegExp","g1","g2","safeToString","toString","trim","encodeHTML","decodeHTML","HtmlPipe","m","n","String","fromCharCode","parseInt","unescapes","rx","IdDirective","LabelForDirective","labelFor","LabelPipe","labels_","getKeys","_len","_key","setLabels","LABELS","ModalEvent","data","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","busy$","getTemplate$","src","getNode","modal$","hasModal","events$","load$","from","fetch","then","response","div","createElement","innerHTML","firstElementChild","reject","ModalOutletComponent","busy_","modalNode","busy","modal_","removeChild","appendChild","compile","pushChanges","NameDirective","NumberPipe","NumberFormat","DIVISIONS","amount","Number","POSITIVE_INFINITY","RelativeDatePipe","numeric","date","formatter","RelativeTimeFormat","division","round","ScrollStickyDirective","args","call","concat","targetNode","until","sticky$","_this2","rect","bottom","innerHeight","sticked","height","min","sticked_","ScrollDirective","container","scrollSpeed","parseFloat","clearProps","wh","left","width","currentY","getProperty","ShareDirective","share","open","encodeURI","encodeURIComponent","c","charCodeAt","facebookUrl","pinterestUrl","linkedInUrl","twitterUrl","whatsappUrl","mailToUrl","title","shareTitle","shareUrl","SlugPipe","SvgIconStructure","_Structure","name_","parentNode","_element$classList","element","createElementNS","w","h","setAttributeNS","rxcompId","replaceChild","Structure","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","autoplay","keyboardControl","mousewheelControl","pagination","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","index","swiper","slideTo","hasPrev","activeIndex","slides","hasNext","slidePrev","slideNext","opacity","slideChange","addListeners_","callback","swiperDirectiveInit","Power2","setTimeout","Swiper","_opening","destroy","matchMedia","matches","ThronService","thron$","THRONContentExperience","THRONPlayer","script","loaded$","head","ID","ThronComponent","THRON","media","splitted","controls","hasAttribute","loop","player","muted","displayLinked","noSkin","onReady","onCanPlay","onPlaying","onPlay","onPause","video","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","playing","play","pause","complete","playVideo","status","pauseVideo","toggle","playing_","TitleDirective","title_","removeAttribute","factories","pipes","CommonModule","_Module","Module","imports","declarations","UID","ControlComponent","uid","label","control","ControlCheckboxComponent","_ControlComponent","link$","anchors","slice","querySelectorAll","anchor","stopPropagation","html","htmlDocument","DOMParser","parseFromString","abstract","description","KeyboardService","keydown$","keydown$_","keyup$","keyup$_","keys$","keys$_","type","key$","key$_","regexp","typing$","typing$_","typing","clearTimeout","ControlCustomSelectComponent","dropdownId","word","scrollToWord","items","item","children","offsetTop","setOption","isMultiple","splice","push","TypeError","_readOnlyError","hasOption","getLabel","v","onDropped","$event","touched","multiple","ControlEmailComponent","ControlFileComponent","file","onReaderComplete","onInputDidChange","files","lastModified","lastModifiedDate","size","reader","FileReader","readAsDataURL","content","result","ControlPasswordComponent","ControlPrivacyComponent","input","onSelect","_this3","ControlSearchComponent","disabled","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","onTest","onReset","reset","ControlsModule","SwiperMainDirective","_SwiperDirective","navigation","prevEl","nextEl","ErrorComponent","showDetail","onDetailToggle","MenuService","setMenu","menu$_","toggleMenu","currentMenu","onBack","menu$","HeaderService","setHeader","header$_","toggleHeader","currentHeader","header$","HeaderComponent","header","menu","scrolled","onToggle","onMenu","direction_","scrolled_","LocationService","has","keyOrValue","pushParams","history","pushState","replaceState","pathname","state","deserialize","encoded","decode","serialize","encode","decoded","json","atob","JSON","parse","stringify","btoa","NewsletterPropositionComponent","FormGroup","email","FormControl","Validators","RequiredValidator","changes$","onNewsletter","action","SwitchComponent","over","onResize","clipPath","overPath","Elastic","clip-path","GtmService","dataLayer","push_","HttpService","http$","method","userPass","response_","headers","Accept","Content-Type","credentials","Headers","typedResponse","contentType","ok","Promise","error","warn","catchError","throwError","getError","get$","delete$","post$","put$","patch$","object","statusCode","statusMessage","statusText","LanguageService","getDefaultLanguages","alternates","getDefaultLanguage","lang","setLanguage","selectedLanguage","setLanguage$","labelsMatch","exec","Function","bhereMatch","bhere","activeLanguage","toggleLanguages","showLanguages","ApiService","_HttpService","SessionStorageService","delete","isSessionStorageSupported","sessionStorage","removeItem","exist","e","cache","setItem","supported","UserViews","SIGN_IN","SIGN_UP","FORGOTTEN","EDIT","User","firstName","substr","toUpperCase","lastName","UserService","setUser","user","user$_","data$","forgot$","payload","me$","busyMe","sessionUser","mapUser","signin$","signout$","signup$","_this4","edit$","_this5","editPassword$","accessData$","gdpr$","tryFacebook$","me","tryGoogle$","tryLinkedin$","sessionStorage$","mapUsers","users","UserDeleteComponent","success","EmailValidator","password","checkRequest","antiforgery","checkField","patch","onSubmit","valid","submitted","form_name","UserDetailComponent","countries","occupations","newsletterLanguages","gdpr","combineLatest","datas","country","occupation","newsletterLanguage","onModalUserUpdate","view","onModalGdpr","legalNote","countryName","occupationName","newsletterLanguageName","UserEditPasswordComponent","tokenEncoded","FormService","toOptions","toSelectOptions","unshift","RequiredIfValidator","fieldName","formGroup","shouldBe","FormValidator","field","requiredIf","UserEditComponent","responseMessage","city","company","privacy","RequiredTrueValidator","newsletter","commercial","promotion","results","UserForgotComponent","forgot","onSignIn","viewSignIn","onSignUp","viewSignUp","UserComponent","views","onModalSignIn","onModalSignUp","skipAutoClose","setView","onViewSignIn","onViewSignUp","onViewForgot","navTo","onForgot","UserModalComponent","_UserComponent","onClose","UserSigninComponent","signIn","viewForgot","UserSignupComponent","passwordConfirm","signUp","SharedModule","AppModule","CoreModule","FormModule","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, first, map, startWith, switchMap } from 'rxjs/operators';\r\n\r\nexport class ScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('ScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\tlet previousY = window.pageYOffset;\r\n\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\treturn fromEvent(window, 'DOMContentLoaded').pipe(\r\n\t\t\t// tap(_ => console.log('ScrollService.DOMContentLoaded')),\r\n\t\t\tfirst(),\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => fromEvent(window, 'scroll')),\r\n\t\t\tstartWith(true),\r\n\t\t\t// tap(_ => console.log('ScrollService.scroll')),\r\n\t\t\tmap(_ => {\r\n\t\t\t\t/*\r\n\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\tlet previousY = body.scrollTop;\r\n\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\tconst y = body.scrollTop;\r\n\t\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t\tif (Math.abs(y - previousY) > 90) {\r\n\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tScrollService.scroll(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true);\r\n\t\t\t\t*/\r\n\t\t\t\tconst y = window.pageYOffset;\r\n\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t// console.log(Math.abs(y - previousY) > 90);\r\n\t\t\t\t// if (Math.abs(y - previousY) > 90) {\r\n\t\t\t\tpreviousY = y;\r\n\t\t\t\tevent.direction = direction;\r\n\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\tScrollService.scroll(event);\r\n\t\t\t\t// }\r\n\t\t\t\treturn event;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic scrollTo(target, options = { offset: -130 }) {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tconst currentTop = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\tconst targetTop = currentTop + target.getBoundingClientRect().top + options.offset;\r\n\t\tconst distance = targetTop - currentTop;\r\n\t\tconst o = { pow: 0 };\r\n\t\tgsap.set(body, {\r\n\t\t\t'scroll-behavior': 'auto'\r\n\t\t});\r\n\t\tif (options.disableLerp) {\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scrollTop': currentTop + distance\r\n\t\t\t});\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tgsap.to(o, {\r\n\t\t\t\tduration: Math.abs(distance) / 2000,\r\n\t\t\t\tpow: 1,\r\n\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\toverwrite: 'all',\r\n\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t'scrollTop': currentTop + distance * o.pow\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// window.scrollTo(0, currentTop + distance * o.pow);\r\n\t\t\t\t},\r\n\t\t\t\tonComplete: () => {\r\n\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// target.scrollIntoView();\r\n\t}\r\n\r\n\tstatic scrollToSelector(selector, options) {\r\n\t\tconst target = document.querySelector(selector);\r\n\t\tif (target) {\r\n\t\t\tScrollService.scrollTo(target, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ScrollService } from './common/scroll/scroll.service';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\tconsole.log('AppComponent.onInit');\r\n\t\tScrollService.init$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe();\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class AltDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('alt', this.alt);\r\n\t}\r\n\r\n}\r\n\r\nAltDirective.meta = {\r\n\tselector: '[[alt]]',\r\n\tinputs: ['alt']\r\n};\r\n","import { BehaviorSubject, of, Subject } from 'rxjs';\r\nimport { filter, finalize, map } from 'rxjs/operators';\r\n\r\nexport class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\t// console.log('IntersectionService.observer', entries);\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t}, {\r\n\t\t\t\t// root: document.querySelector('body'),\r\n\t\t\t\troot: null, // sets the framing element to the viewport\r\n\t\t\t\trootMargin: '100px 0px 100px 0px',\r\n\t\t\t\tthreshold: [0, 0.25, 0.5, 0.75, 1],\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfilter(entry => entry !== undefined),\r\n\t\t\t\t// filter(entry => entry !== undefined && entry.isIntersecting && entry.intersectionRatio > 0), // entry.intersectionRatio > 0\r\n\t\t\t\t// first(),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node });\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tfunction observer() {\r\n\t\t\tif ('IntersectionObserver' in window) {\r\n\t\t\t\treturn new IntersectionObserver(entries => {\r\n\t\t\t\t\tentries.forEach(function(entry) {\r\n\t\t\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\t\t\tentry.target.classList.add('appear');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn { observe: function(node) { node.classList.add('appear')}, unobserve: function() {} };\r\n\t\t\t}\r\n\t\t}\r\n\t\tobserver.observe(node);\r\n\t\tobserver.unobserve(node);\r\n\t\t*/\r\n\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { IntersectionService } from '../intersection/intersection.service';\r\n\r\nexport class AppearDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear');\r\n\t\tIntersectionService.intersection$(node).pipe(\r\n\t\t\t// first(),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(entry => {\r\n\t\t\tentry.intersectionRatio > 0.5 ? node.classList.add('appeared') : node.classList.remove('appeared');\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nAppearDirective.meta = {\r\n\tselector: '[appear]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { Utils } from './common/utils/utils';\r\nimport { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona una file...',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\n// console.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\tcart: true,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/aquafil/api',\r\n\tassets: '/aquafil/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/aquafil/products-configure.html`,\r\n\t\tcart: `/aquafil/cart.html`,\r\n\t\treservedArea: `/aquafil/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tcareersModal: '/aquafil/partials/modals/careers-modal.html',\r\n\t\t\tgenericModal: '/aquafil/partials/modals/generic-modal.html',\r\n\t\t\tmarketsAndLanguagesModal: '/aquafil/partials/modals/markets-and-languages-modal.html',\r\n\t\t\tmaterialsModal: '/aquafil/partials/modals/materials-modal.html',\r\n\t\t\tordersModal: '/aquafil/partials/modals/orders-modal.html',\r\n\t\t\tprojectsRegistrationModal: '/aquafil/partials/modals/projects-registration-modal.html',\r\n\t\t\tuserModal: '/aquafil/partials/modals/user-modal.html',\r\n\t\t}\r\n\t},\r\n\tfacebook: {\r\n\t\tappId: 610048027052371,\r\n\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\r\n\t\tscope: 'public_profile, email', // publish_stream\r\n\t\ttokenClient: '951b013fe59b05cf471d869aae9ba6ba',\r\n\t\tversion: 'v11.0',\r\n\t},\r\n\tgoogle: {\r\n\t\tclientId: '760742757246-61qknlmthbmr54bh7ch19kjr0sftm4q3.apps.googleusercontent.com',\r\n\t},\r\n\tlinkedIn: {\r\n\t\tclientId: '77cg5ls5lgu3k3',\r\n\t\tclientSecret: 'gfBIl365EdckxCgK',\r\n\t\tscope: 'r_emailaddress r_liteprofile',\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/aquafil/main/docs/',\r\n};\r\n","\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t\tcart: true,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/api',\r\n\tassets: '/Client/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/it/it/products-configure`,\r\n\t\tcart: `/it/it/cart`,\r\n\t\treservedArea: `/it/it/reserved-area`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tcareersModal: '/template/modals/careers-modal.cshtml',\r\n\t\t\tgenericModal: '/template/modals/generic-modal.cshtml',\r\n\t\t\tmarketsAndLanguagesModal: '/template/modals/markets-and-languages-modal.cshtml',\r\n\t\t\tmaterialsModal: '/template/modals/materials-modal.cshtml',\r\n\t\t\tordersModal: '/template/modals/orders-modal.cshtml',\r\n\t\t\tprojectsRegistrationModal: '/template/modals/projects-registration-modal.cshtml',\r\n\t\t\tuserModal: '/template/modals/user-modal.cshtml',\r\n\t\t}\r\n\t},\r\n\tfacebook: {\r\n\t\tappId: 610048027052371,\r\n\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\r\n\t\tscope: 'public_profile, email', // publish_stream\r\n\t\ttokenClient: '951b013fe59b05cf471d869aae9ba6ba',\r\n\t\tversion: 'v11.0',\r\n\t},\r\n\tgoogle: {\r\n\t\tclientId: '760742757246-61qknlmthbmr54bh7ch19kjr0sftm4q3.apps.googleusercontent.com',\r\n\t},\r\n\tlinkedIn: {\r\n\t\tclientId: '77cg5ls5lgu3k3',\r\n\t\tclientSecret: 'gfBIl365EdckxCgK',\r\n\t\tscope: 'r_emailaddress r_liteprofile',\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyByTXqwtyFUcD6d4PY7ab4GBwS5IYjEVcc',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/aquafil/main/docs/',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class DatePipe extends Pipe {\r\n\r\n\tstatic transform(value, options = {}, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\treturn new Intl.DateTimeFormat(language, options).format(value instanceof Date ? value : new Date(value));\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tstatic transform(value, locale = 'it-IT-u-ca-gregory', options = {\r\n\t\tdateStyle: 'short',\r\n\t\ttimeStyle: 'short',\r\n\t}) {\r\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\r\n\t\treturn localeDateString;\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nDatePipe.meta = {\r\n\tname: 'date',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class DownloadDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('download', this.download);\r\n\t}\r\n\r\n}\r\n\r\nDownloadDirective.meta = {\r\n\tselector: '[[download]]',\r\n\tinputs: ['download']\r\n};\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class LocomotiveScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('LocomotiveScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init(node, options) {\r\n\t\toptions = Object.assign({\r\n\t\t\tuseKeyboard: true,\r\n\t\t\tsmoothMobile: true,\r\n\t\t\tinertia: 0.5,\r\n\t\t\t// name:'scroll',\r\n\t\t\t// offset: [0,0], // bottom top\r\n\t\t\t// repeat: false,\r\n\t\t\tsmooth: true,\r\n\t\t\t// initPosition: { x: 0, y: 0 }\r\n\t\t\t// direction: 'vertical',\r\n\t\t\tlerp: 0.01,\r\n\t\t\tgetDirection: true, // add direction to scroll event\r\n\t\t\tgetSpeed: true, // add speed to scroll event\r\n\t\t\t// class: 'is-inview',\r\n\t\t\tinitClass: 'has-scroll-init',\r\n\t\t\tscrollingClass: 'has-scroll-scrolling',\r\n\t\t\tdraggingClass: 'has-scroll-dragging',\r\n\t\t\tsmoothClass: 'has-scroll-smooth',\r\n\t\t\tscrollbarContainer: false,\r\n\t\t\tscrollbarClass: 'c-scrollbar',\r\n\t\t\tmultiplier: 1,\r\n\t\t\tfirefoxMultiplier: 50,\r\n\t\t\ttouchMultiplier: 2,\r\n\t\t\tscrollFromAnywhere: true,\r\n\t\t\tgestureDirection: 'vertical',\r\n\t\t\treloadOnContextChange: false,\r\n\t\t\tresetNativeScroll: true,\r\n\t\t}, options, {\r\n\t\t\tel: node,\r\n\t\t});\r\n\t\tif (this.useLocomotiveScroll()) {\r\n\t\t\tconst instance = new LocomotiveScroll(options);\r\n\t\t\tLocomotiveScrollService.instance = instance;\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\tdocument.querySelector('html').classList.add('has-scroll-init');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic useLocomotiveScroll() {\r\n\t\treturn window.innerWidth >= 768 && !this.isTouchDevice();\r\n\t}\r\n\r\n\tstatic isTouchDevice() {\r\n\t\tconst userAgent = navigator.userAgent.toLowerCase();\r\n\t\tconst isTablet = /(mac|ipad|tablet|(android(?!.*mobile))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent);\r\n\t\tconst isSmartphone = /(ipod|iphone|(android(?!.*mobile))|(windows(?!.*phone)(.*touch)))/.test(userAgent);\r\n\t\treturn isTablet || isSmartphone;\r\n\t}\r\n\r\n\tstatic isMacLike() {\r\n\t\tconst isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isMacLike;\r\n\t}\r\n\r\n\tstatic isIOS() {\r\n\t\tconst isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isIOS;\r\n\t}\r\n\r\n\tstatic isMacOs() {\r\n\t\tconst isMacOs = navigator.platform.toLowerCase().indexOf('mac') >= 0;\r\n\t\treturn isMacOs;\r\n\t}\r\n\r\n\tstatic isSafari() {\r\n\t\tconst isSafari = navigator.vendor.match(/apple/i) &&\r\n\t\t\t!navigator.userAgent.match(/crios/i) &&\r\n\t\t\t!navigator.userAgent.match(/fxios/i);\r\n\t\treturn isSafari;\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'DOMContentLoaded').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tconst showefy = document.querySelector('#showefy');\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance);\r\n\t\t\t\t\t\tif (showefy) {\r\n\t\t\t\t\t\t\tconst isShowefyDisabled = instance.speed > 0.1;\r\n\t\t\t\t\t\t\tif (isShowefyDisabled) {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents !== 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'none';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents === 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'auto';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\tlet previousY = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t\t\tif (Math.abs(y - previousY) > 90) {\r\n\t\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\t\tLocomotiveScrollService.scroll(event);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn LocomotiveScrollService.scroll$;\r\n\t\t\t\t// }, 1);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.update();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stop() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic start() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.start();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollTo(target, options = { offset: -130 }) {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.scrollTo(target, options);\r\n\t\t} else {\r\n\t\t\tconst body = document.querySelector('body');\r\n\t\t\tconst currentTop = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\tconst targetTop = currentTop + target.getBoundingClientRect().top + options.offset;\r\n\t\t\tconst distance = targetTop - currentTop;\r\n\t\t\tconst o = { pow: 0 };\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t});\r\n\t\t\tif (options.disableLerp) {\r\n\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t'scrollTop': currentTop + distance\r\n\t\t\t\t});\r\n\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tgsap.to(o, {\r\n\t\t\t\t\tduration: Math.abs(distance) / 2000,\r\n\t\t\t\t\tpow: 1,\r\n\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t\t'scrollTop': currentTop + distance * o.pow\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// window.scrollTo(0, currentTop + distance * o.pow);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// target.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollToSelector(selector, options) {\r\n\t\tconst target = document.querySelector(selector);\r\n\t\tif (target) {\r\n\t\t\tLocomotiveScrollService.scrollTo(target, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../locomotive-scroll/locomotive-scroll.service';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t\t// LocomotiveScrollService.stop();\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t\t// LocomotiveScrollService.start();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.enter$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.leave$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tenter$(node) {\r\n\t\t// const { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'mouseenter').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tLocomotiveScrollService.stop();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tleave$(node) {\r\n\t\t// const { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'mouseleave').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tLocomotiveScrollService.start();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\tonEnter(event) {\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonLeave(event) {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.addEventListener('mouseenter', this.onEnter);\r\n\t\tnode.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('mouseenter', this.onEnter);\r\n\t\tnode.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\t*/\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { startWith, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport class EllipsisDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.originalText = node.innerText;\r\n\t\tthis.resize$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tresize$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tstartWith(_ => null),\r\n\t\t\ttap(_ => {\r\n\t\t\t\tlet text = this.originalText;\r\n\t\t\t\tnode.innerText = text;\r\n\t\t\t\twhile (node.scrollHeight - node.offsetHeight > 0) {\r\n\t\t\t\t\tconst words = text.split(' ');\r\n\t\t\t\t\twords.pop();\r\n\t\t\t\t\ttext = `${words.join(' ')}...`;\r\n\t\t\t\t\tnode.innerText = text;\r\n\t\t\t\t\t// console.log(node.scrollHeight, node.offsetHeight);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nEllipsisDirective.meta = {\r\n\tselector: '[ellipsis]',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../locomotive-scroll/locomotive-scroll.service';\r\n\r\nexport class FilterItemComponent extends Component {\r\n\r\n\tonInit() {\r\n\r\n\t}\r\n\r\n\tcloseFilter() {\r\n\t\tthis.filter.active = false;\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tonEnter() {\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonLeave() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nFilterItemComponent.meta = {\r\n\tselector: '[filter], [[filter]]',\r\n\toutputs: ['change'],\r\n\tinputs: ['filter', 'filters', 'name'],\r\n\ttemplate: /* html */`\r\n\t\t<div class=\"group--filter\" (click)=\"toggleFilter(filter)\" (clickOutside)=\"closeFilter(filter)\">\r\n\t\t\t<span class=\"label\" [innerHTML]=\"filter.getLabel() || name\"></span>\r\n\t\t\t<svg class=\"caret-down\" *if=\"!filter.hasAny()\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<svg class=\"close-sm\" *if=\"filter.hasAny()\" (click)=\"clearFilter($event, filter)\"><use xlink:href=\"#close-sm\"></use></svg>\r\n\t\t</div>\r\n\t\t<div class=\"options\" *if=\"filter.active\" (mouseenter)=\"onEnter()\" (mouseleave)=\"onLeave()\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"name\"></div>\r\n\t\t\t<ul class=\"nav--options\">\r\n\t\t\t\t<li class=\"nav--options__item\" [class]=\"{ active: filter.has(item), disabled: item.disabled, empty: !item.value }\" *for=\"let item of filter.options\">\r\n\t\t\t\t\t<span class=\"option\" (click)=\"filter.set(item)\">\r\n\t\t\t\t\t\t<span class=\"name\" [innerHTML]=\"item.label | label\"></span>\r\n\t\t\t\t\t\t<!-- <span class=\"count\" [innerHTML]=\"item.count || ''\"></span> -->\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t`,\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","\r\nimport { Pipe } from 'rxcomp';\r\n\r\nexport class HighlightPipe extends Pipe {\r\n\r\n\tstatic transform(text, query) {\r\n\t\tif (!query) {\r\n\t\t\treturn text;\r\n\t\t}\r\n\t\tif (!Array.isArray(query)) {\r\n\t\t\tquery = [query];\r\n\t\t}\r\n\t\t// text = HighlightPipe.encodeHTML(text);\r\n\t\tconst escapedQuery = query.map(x => HighlightPipe.escapeRegexChars(x));\r\n\t\tconst regExp = new RegExp(`(\\<[^\\>]+\\>)|(${escapedQuery.join('|')})`, 'gmi');\r\n\t\t// const regExp = new RegExp(`(?<!\\<)${escapedQuery.join('(?![\\w\\s]*[\\>])|(?<!\\<)')}(?![\\w\\s]*[\\>])`, 'gmi');\r\n\t\t// const regExp = new RegExp('&[^;]+;|' + escapedQuery.join('|'), 'gi');\r\n\t\ttext = text.replace(regExp, function(match, g1, g2) {\r\n\t\t\tif (g1) {\r\n\t\t\t\treturn g1;\r\n\t\t\t} else {\r\n\t\t\t\treturn '<b>' + g2 + '</b>';\r\n\t\t\t}\r\n\t\t\t// return match.toLowerCase() === x.toLowerCase() ? '<strong>' + match + '</strong>' : match;\r\n\t\t});\r\n\t\t// text = HighlightPipe.decodeHTML(text);\r\n\t\tconsole.log(text, query);\r\n\t\treturn text;\r\n\t}\r\n\r\n\tstatic escapeRegexChars(text) {\r\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n\t}\r\n\r\n\tstatic safeToString(text) {\r\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\r\n\t}\r\n\r\n\tstatic encodeHTML(text) {\r\n\t\treturn this.safeToString(text)\r\n\t\t\t.replace(/&/g, '&amp;')\r\n\t\t\t.replace(/</g, '&lt;')\r\n\t\t\t.replace(/>/g, '&gt;');\r\n\t}\r\n\r\n\tstatic decodeHTML(text) {\r\n\t\treturn text\r\n\t\t\t.replace(/&amp;/g, '&')\r\n\t\t\t.replace(/&lt;/g, '<')\r\n\t\t\t.replace(/&gt;/g, '>');\r\n\t}\r\n\r\n}\r\n\r\nHighlightPipe.meta = {\r\n\tname: 'highlight',\r\n};\r\n\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class IdDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', this.id);\r\n\t}\r\n\r\n}\r\n\r\nIdDirective.meta = {\r\n\tselector: '[[id]]',\r\n\tinputs: ['id']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class LabelForDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('for', this.labelFor);\r\n\t}\r\n\r\n}\r\n\r\nLabelForDirective.meta = {\r\n\tselector: '[[labelFor]]',\r\n\tinputs: ['labelFor']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona una file...',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\n// export class ModalLoadEvent extends ModalEvent { }\r\n// export class ModalLoadedEvent extends ModalEvent { }\r\nexport class ModalResolveEvent extends ModalEvent { }\r\nexport class ModalRejectEvent extends ModalEvent { }\r\n\r\nexport class ModalService {\r\n\r\n\tstatic hasModal = false;\r\n\r\n\tstatic open$(modal) {\r\n\t\tthis.busy$.next(true);\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\t// startWith(new ModalLoadEvent(Object.assign({}, modal.data, { $src: modal.src }))),\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => {\r\n\t\t\t\tthis.modal$.next(node);\r\n\t\t\t\tthis.hasModal = true;\r\n\t\t\t\tthis.busy$.next(false);\r\n\t\t\t\t// this.events$.next(new ModalLoadedEvent(Object.assign({}, modal.data, { $src: modal.src })));\r\n\t\t\t}),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t\ttap(_ => this.hasModal = false)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\nModalService.busy$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ModalService } from './modal.service';\r\n\r\nexport class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tget busy() {\r\n\t\treturn this.busy_;\r\n\t}\r\n\r\n\tset busy(busy) {\r\n\t\t// console.log('ModalOutletComponent set busy', busy, this);\r\n\t\tif (this.busy_ !== busy) {\r\n\t\t\tthis.busy_ = busy;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.busy_ = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => this.modal = modal);\r\n\t\tModalService.busy$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(busy => this.busy = busy);\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal, busy: busy }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t\t<!-- spinner -->\r\n\t\t<div class=\"spinner spinner--contrasted\" *if=\"busy\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class NameDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('name', this.name);\r\n\t}\r\n\r\n}\r\n\r\nNameDirective.meta = {\r\n\tselector: '[[name]]',\r\n\tinputs: ['name']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class NumberPipe extends Pipe {\r\n\r\n\tstatic transform(value, options = {}, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\treturn new Intl.NumberFormat(language, options).format(value);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNumberPipe.meta = {\r\n\tname: 'number',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nconst DIVISIONS = [\r\n\t{ amount: 60, name: 'seconds' },\r\n\t{ amount: 60, name: 'minutes' },\r\n\t{ amount: 24, name: 'hours' },\r\n\t{ amount: 7, name: 'days' },\r\n\t{ amount: 4.34524, name: 'weeks' },\r\n\t{ amount: 12, name: 'months' },\r\n\t{ amount: Number.POSITIVE_INFINITY, name: 'years' }\r\n];\r\n\r\nexport class RelativeDatePipe extends Pipe {\r\n\r\n\tstatic transform(value, options = { numeric: 'auto' }, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tconst date = value instanceof Date ? value : new Date(value);\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\tconst formatter = new Intl.RelativeTimeFormat(language, options);\r\n\t\t\tlet duration = (date - new Date()) / 1000;\r\n\t\t\tfor (let i = 0; i <= DIVISIONS.length; i++) {\r\n\t\t\t\tconst division = DIVISIONS[i];\r\n\t\t\t\tif (Math.abs(duration) < division.amount) {\r\n\t\t\t\t\treturn formatter.format(Math.round(duration), division.name);\r\n\t\t\t\t}\r\n\t\t\t\tduration /= division.amount;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nRelativeDatePipe.meta = {\r\n\tname: 'relativeDate',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { ScrollService } from './scroll.service';\r\n\r\nexport class ScrollStickyDirective extends Directive {\r\n\r\n\tsticked_ = false;\r\n\tget sticked() {\r\n\t\treturn this.sticked_;\r\n\t}\r\n\tset sticked(sticked) {\r\n\t\tif (this.sticked_ !== sticked) {\r\n\t\t\tthis.sticked_ = sticked;\r\n\t\t\tif (this.targetNode) {\r\n\t\t\t\tsticked ? this.targetNode.classList.add('sticked') : this.targetNode.classList.remove('sticked');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.targetNode = (this.target ? (node.querySelector(this.target) || node) : node);\r\n\t\tthis.until = this.until ? document.querySelector(this.until) : null;\r\n\t\tconsole.log('ScrollStickyDirective', this.targetNode, this.until);\r\n\t\tthis.sticky$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('ScrollStickyDirective', event);\r\n\t\t});\r\n\t}\r\n\r\n\tsticky$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst targetNode = this.targetNode;\r\n\t\tconst until = this.until;\r\n\t\treturn ScrollService.scroll$.pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconsole.log(event);\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tlet y = 0;\r\n\t\t\t\tif (this.bottom) {\r\n\t\t\t\t\tconst bottom = window.innerHeight - targetNode.offsetHeight;\r\n\t\t\t\t\tif (window.innerWidth >= 1024 && rect.y > bottom) {\r\n\t\t\t\t\t\ty = bottom - rect.y;\r\n\t\t\t\t\t\tthis.sticked = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.sticked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst top = event.direction === 'down' ? 80 : 135;\r\n\t\t\t\t\tif (window.innerWidth >= 1024 && rect.y < top) {\r\n\t\t\t\t\t\ty = top - rect.y;\r\n\t\t\t\t\t\tif (until) {\r\n\t\t\t\t\t\t\tconst untilRect = until.getBoundingClientRect();\r\n\t\t\t\t\t\t\tconst height = untilRect.y - rect.y;\r\n\t\t\t\t\t\t\ty = Math.min(height, y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.sticked = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.sticked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(rect.height - targetNode.offsetHeight);\r\n\t\t\t\t// gsap.set(targetNode, { y });\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollStickyDirective.meta = {\r\n\tselector: '[scroll-sticky],[[scroll-sticky]]',\r\n\tinputs: ['target', 'until', 'bottom'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { ScrollService } from './scroll.service';\r\n\r\nexport class ScrollDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.scroll$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('ScrollDirective', event);\r\n\t\t});\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = this.scroll && node.querySelector(this.scroll) || node;\r\n\t\tconst container = target === node ? window : node;\r\n\t\tconst speed = this.scrollSpeed ? parseFloat(this.scrollSpeed) : 1.5;\r\n\t\treturn ScrollService.scroll$.pipe(\r\n\t\t\ttap(_ => {\r\n\t\t\t\tif (window.innerWidth < 1024) {\r\n\t\t\t\t\tgsap.set(target, { clearProps: true });\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst containerRect = container === window ? { top: 0, left: 0, width: window.innerWidth, height: window.innerHeight } : container.getBoundingClientRect();\r\n\t\t\t\tconst wh = containerRect.height;\r\n\t\t\t\tconst rect = target.getBoundingClientRect();\r\n\t\t\t\tconst currentY = gsap.getProperty(target, 'y');\r\n\t\t\t\tconst top = rect.top - currentY;\r\n\t\t\t\tconst height = rect.height;\r\n\t\t\t\tconst space = wh + height;\r\n\t\t\t\tlet pow;\r\n\t\t\t\tif (top > -height && top < wh) {\r\n\t\t\t\t\tpow = (top + height) / space;\r\n\t\t\t\t\tpow = 1 - pow * 2;\r\n\t\t\t\t\tconst y = pow * speed * -100;\r\n\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\ty,\r\n\t\t\t\t\t\tduration: 0.250,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t/*\r\n\t\t\t\tconst wh2 = wh / 2;\r\n\t\t\t\tconst bottom = rect.bottom - currentY;\r\n\t\t\t\tif (top < wh && bottom > 0) {\r\n\t\t\t\t\tpow = (top - wh2) / wh2;\r\n\t\t\t\t\tconst y = pow * speed * 40;\r\n\t\t\t\t\tgsap.set(node, { y });\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollDirective.meta = {\r\n\tselector: '[scroll]',\r\n\tinputs: ['scroll', 'scrollSpeed'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport class ShareDirective extends Directive {\r\n\r\n\tget href() {\r\n\t\tswitch (this.share) {\r\n\t\t\tcase 'facebook':\r\n\t\t\t\treturn this.facebookUrl;\r\n\t\t\tcase 'pinterest':\r\n\t\t\t\treturn this.pinterestUrl;\r\n\t\t\tcase 'linkedIn':\r\n\t\t\t\treturn this.linkedInUrl;\r\n\t\t\tcase 'twitter':\r\n\t\t\t\treturn this.twitterUrl;\r\n\t\t\tcase 'whatsapp':\r\n\t\t\t\treturn this.whatsappUrl;\r\n\t\t\tcase 'mailTo':\r\n\t\t\t\treturn this.mailToUrl;\r\n\t\t}\r\n\t}\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.url}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.url}&media=&description=${this.title}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.url}&title=${this.title}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.title}%20${this.url}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.url}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.title}&body=${this.url}`;\r\n\t}\r\n\r\n\tget title() {\r\n\t\tconst title = this.shareTitle ? this.shareTitle : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tget url() {\r\n\t\tlet url = this.shareUrl;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ShareComponent.onInit', this.share, this.title);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = this.href;\r\n\t\tnode.setAttribute('href', href);\r\n\t\tif (this.share !== 'mailTo') {\r\n\t\t\tnode.setAttribute('target', '_blank');\r\n\t\t\tfromEvent(node, 'click').pipe(\r\n\t\t\t\ttap(event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\twindow.open(href, 'ShareWindow', window.innerWidth >= 768 ? 'width=640,height=480' : '');\r\n\t\t\t\t}),\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.shareTitle);\r\n\t}\r\n\t*/\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareDirective.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'shareUrl', 'shareTitle'],\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst slug = environment.slug;\r\n\t\treturn slug[key] || `#${key}`;\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { getContext, Structure } from 'rxcomp';\r\n\r\nexport class SvgIconStructure extends Structure {\r\n\tonInit() {\r\n\t\tthis.update();\r\n\t}\r\n\tonChanges() {\r\n\t\tthis.update();\r\n\t}\r\n\tupdate() {\r\n\t\tif (this.name_ !== this.name) {\r\n\t\t\tthis.name_ = this.name;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node.parentNode) {\r\n\t\t\t\tconst xmlns = 'http://www.w3.org/2000/svg';\r\n\t\t\t\tconst element = document.createElementNS(xmlns, `svg`);\r\n\t\t\t\tconst w = this.width || 24;\r\n\t\t\t\tconst h = this.height || 24;\r\n\t\t\t\telement.setAttribute('class', `icon--${this.name}`);\r\n\t\t\t\t// element.setAttributeNS(null, 'width', w);\r\n\t\t\t\t// element.setAttributeNS(null, 'height', h);\r\n\t\t\t\telement.setAttributeNS(null, 'viewBox', `0 0 ${w} ${h}`);\r\n\t\t\t\telement.innerHTML = `<use xlink:href=\"#${this.name}\"></use>`;\r\n\t\t\t\telement.rxcompId = node.rxcompId;\r\n\t\t\t\telement.classList.add(...node.classList);\r\n\t\t\t\tnode.parentNode.replaceChild(element, node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSvgIconStructure.meta = {\r\n\tselector: 'svg-icon',\r\n\tinputs: ['name', 'width', 'height']\r\n};\r\n\r\n/*\r\n<svg class=\"copy\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><use xlink:href=\"#copy\"></use></svg>\r\n*/\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\t// console.log('SwiperDirective.hasPrev', swiper.activeIndex, swiper.realIndex, swiper.slides.length);\r\n\t\t\tif (swiper.activeIndex > 0 && swiper.slides.length > swiper.activeIndex) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thasNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\tconst slidesPerView = swiper.params.slidesPerView === 'auto' ? 1 : (swiper.params.slidesPerView || 1);\r\n\t\t\t// console.log('SwiperDirective.hasNext', swiper.slides.length, slidesPerView, swiper.activeIndex);\r\n\t\t\tif (swiper.activeIndex < swiper.slides.length - slidesPerView) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslidePrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasPrev()) {\r\n\t\t\t// console.log('SwiperDirective.slidePrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tslideNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasNext()) {\r\n\t\t\t// console.log('SwiperDirective.slideNext', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_(target) {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttarget = target || node;\r\n\t\t\tthis.target = target;\r\n\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tif (swiper) {\r\n\t\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst target = this.target;\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\t\tduration: 0.4,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(target, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(target, this.options);\r\n\t\t\t\t// console.log(swiper);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\ttarget.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer']\r\n};\r\n","import { fromEvent, of } from 'rxjs';\r\nimport { map, shareReplay } from 'rxjs/operators';\r\n\r\n// <!-- <script id=ta_bootstrapper src='https://gruppoconcorde-cdn.thron.com/shared/plugins/tracking/current/bootstrapper-min.js'></script> -->\r\n// <script src='https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js'></script>\r\n\r\nexport class ThronService {\r\n\r\n\tstatic thron$() {\r\n\t\tlet thron = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (thron) {\r\n\t\t\treturn of(thron);\r\n\t\t} else {\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', 'https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js')\r\n\t\t\tconst loaded$ = fromEvent(script, 'load').pipe(\r\n\t\t\t\t// tap(event => console.log(event, window.THRONContentExperience || window.THRONPlayer)),\r\n\t\t\t\tmap(event => window.THRONContentExperience || window.THRONPlayer),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t\treturn document.head.appendChild(script) && loaded$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, tap } from 'rxjs/operators';\r\nimport { ThronService } from './thron.service';\r\n\r\nlet ID = 0;\r\n\r\nexport class ThronComponent extends Component {\r\n\r\n\tplaying_ = false;\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node) {\r\n\t\t\t\tplaying ? node.classList.add('playing') : node.classList.remove('playing');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ThronComponent.onInit');\r\n\t\tthis.init$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tinit$() {\r\n\t\treturn ThronService.thron$().pipe(\r\n\t\t\ttap(THRON => {\r\n\t\t\t\t// const THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\t\t\tif (!THRON) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('THRONContentExperience', window.THRONContentExperience, 'THRONPlayer', window.THRONPlayer);\r\n\t\t\t\tconst { node } = getContext(this);\r\n\t\t\t\tconst target = this.target = node.querySelector('.video > .thron');\r\n\t\t\t\tconst id = target.id = `thron-${++ID}`;\r\n\t\t\t\tlet media = this.thron;\r\n\t\t\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\t\t\tconst splitted = media.split('/');\r\n\t\t\t\t\tconst clientId = splitted[6];\r\n\t\t\t\t\tconst xcontentId = splitted[7];\r\n\t\t\t\t\tconst pkey = splitted[8];\r\n\t\t\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t\t\t}\r\n\t\t\t\tconst controls = this.controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\t\t\tloop = this.loop = node.hasAttribute('loop') ? true : false,\r\n\t\t\t\t\tautoplay = this.autoplay = node.hasAttribute('autoplay') ? true : false;\r\n\t\t\t\tconst player = this.player = THRON(id, {\r\n\t\t\t\t\tmedia: media,\r\n\t\t\t\t\tloop: loop,\r\n\t\t\t\t\tautoplay: autoplay,\r\n\t\t\t\t\tmuted: !controls,\r\n\t\t\t\t\tdisplayLinked: 'close',\r\n\t\t\t\t\tnoSkin: !controls,\r\n\t\t\t\t\t// lockBitrate: 'max',\r\n\t\t\t\t});\r\n\t\t\t\tthis.onReady = this.onReady.bind(this);\r\n\t\t\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\t\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\t\t\tplayer.on('ready', this.onReady);\r\n\t\t\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\t\t\tplayer.on('playing', this.onPlaying);\r\n\t\t\t\tplayer.on('play', this.onPlay);\r\n\t\t\t\tplayer.on('pause', this.onPause);\r\n\t\t\t\tplayer.on('complete', this.onComplete);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tif (!this.controls) {\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t\tvideo.setAttribute('autoplay', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(id);\r\n\t\t// video.setAttribute('autoplay', 'true');\r\n\t};\r\n\r\n\tonCanPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onCanPlay', id);\r\n\t\tthis.canPlay.next(id);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tif (!this.controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\t// console.log('ThronDirective.onPlaying', id, qualities);\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t\t// console.log('ThronDirective.onPlaying', id, 'currentQuality', player.currentQuality());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = true;\r\n\t\tthis.play.next(id);\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.pause.next(id);\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.complete.next(id);\r\n\t}\r\n\r\n\tplayVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.playVideo', id, status);\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpauseVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t} else {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay(id) {\r\n\t\t// console.log('ThronDirective.play', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause(id) {\r\n\t\t// console.log('ThronDirective.pause', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.pauseVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tif (player) {\r\n\t\t\tplayer.off('ready', this.onReady);\r\n\t\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\t\tplayer.off('playing', this.onPlaying);\r\n\t\t\tplayer.off('play', this.onPlay);\r\n\t\t\tplayer.off('pause', this.onPause);\r\n\t\t\tplayer.off('complete', this.onComplete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron],[[thron]]',\r\n\toutputs: ['ready', 'canPlay', 'play', 'pause', 'complete'],\r\n\tinputs: ['thron', 'm3u8'],\r\n\ttemplate: /* html */``,\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { AltDirective } from './alt/alt.directive';\r\nimport { AppearDirective } from './appear/appear.directive';\r\nimport { ClickOutsideDirective } from './click-outside/click-outside.directive';\r\nimport { DatePipe } from './date/date.pipe';\r\nimport { DownloadDirective } from './download/download.directive';\r\nimport { DropdownItemDirective } from './dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './dropdown/dropdown.directive';\r\nimport { EllipsisDirective } from './ellipsis/ellipsis.directive';\r\nimport { EnvPipe } from './env/env.pipe';\r\nimport { FilterItemComponent } from './filter/filter-item.component';\r\nimport { FlagPipe } from './flag/flag.pipe';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HtmlPipe } from './html/html.pipe';\r\nimport { IdDirective } from './id/id.directive';\r\nimport { LabelForDirective } from './label-for/label-for.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { ModalOutletComponent } from './modal/modal-outlet.component';\r\nimport { NameDirective } from './name/name.directive';\r\nimport { NumberPipe } from './number/number.pipe';\r\nimport { RelativeDatePipe } from './relative-date/relative-date.pipe';\r\nimport { ScrollStickyDirective } from './scroll/scroll-sticky.directive';\r\nimport { ScrollDirective } from './scroll/scroll.directive';\r\nimport { ShareDirective } from './share/share.directive';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { SvgIconStructure } from './svg/svg-icon.structure';\r\nimport { SwiperDirective } from './swiper/swiper.directive';\r\nimport { ThronComponent } from './thron/thron.component';\r\nimport { TitleDirective } from './title/title.directive';\r\n\r\nconst factories = [\r\n\tAltDirective,\r\n\tAppearDirective,\r\n\tClickOutsideDirective,\r\n\tDownloadDirective,\r\n\t// DropDirective,\r\n\tDropdownDirective,\r\n\tDropdownItemDirective,\r\n\t// DropdownItemDirective,\r\n\tEllipsisDirective,\r\n\tFilterItemComponent,\r\n\tIdDirective,\r\n\tLabelForDirective,\r\n\t// LanguageComponent,\r\n\t// LazyDirective,\r\n\t// ModalComponent,\r\n\tModalOutletComponent,\r\n\tNameDirective,\r\n\tScrollDirective,\r\n\tScrollStickyDirective,\r\n\tShareDirective,\r\n\tSvgIconStructure,\r\n\tSwiperDirective,\r\n\tThronComponent,\r\n\tTitleDirective,\r\n\t// UploadItemComponent,\r\n\t// VirtualStructure\r\n];\r\n\r\nconst pipes = [\r\n\tDatePipe,\r\n\tEnvPipe,\r\n\tFlagPipe,\r\n\tHighlightPipe,\r\n\tHtmlPipe,\r\n\tLabelPipe,\r\n\tNumberPipe,\r\n\tRelativeDatePipe,\r\n\tSlugPipe,\r\n];\r\n\r\nexport class CommonModule extends Module { }\r\n\r\nCommonModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nlet UID = 10000;\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tget uniqueId() {\r\n\t\treturn this.control.name + this.uid;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.uid = ++UID;\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// console.log(this, node, this.control);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { from, fromEvent, merge } from 'rxjs';\r\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../common/modal/modal.service';\r\nimport { environment } from '../environment';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tif (this.target === 'modal') {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.link$().pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t\t).subscribe();\r\n\t\t\t}, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tlink$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst anchors = Array.prototype.slice.call(node.querySelectorAll('a'));\r\n\t\t// console.log(anchors, node.innerHTML);\r\n\t\treturn merge(...anchors.map(anchor => fromEvent(anchor, 'click'))).pipe(\r\n\t\t\tswitchMap(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\t\t\tconst anchor = event.target;\r\n\t\t\t\tconst href = anchor.getAttribute('href');\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.href', href);\r\n\t\t\t\treturn from(fetch(href).then(response => response.text()));\r\n\t\t\t}),\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.html', html);\r\n\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\tconst htmlDocument = parser.parseFromString(html, 'text/html');\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.htmlDocument', htmlDocument);\r\n\t\t\t\tlet title = htmlDocument.querySelector('.section--intro-sm .title');\r\n\t\t\t\ttitle = title ? title.innerHTML : null;\r\n\t\t\t\tlet abstract = htmlDocument.querySelector('.section--intro-sm .descritpion');\r\n\t\t\t\tabstract = abstract ? abstract.innerHTML : null;\r\n\t\t\t\tlet description = htmlDocument.querySelector('.section--text .col-md-6');\r\n\t\t\t\tdescription = description ? description.innerHTML : null;\r\n\t\t\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: title, abstract: abstract, description: description } }).pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t\t).subscribe(event => {\r\n\t\t\t\t\t// console.log('ControlCheckboxComponent.link$.genericModal', event);\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label', 'target'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input [id]=\"uniqueId\" type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t<label [labelFor]=\"uniqueId\">\r\n\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t\t<span class=\"required__sign\">*</span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../common/dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../common/keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\t// console.log('ControlCustomSelectComponent.onChanges');\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = value ? items.find(x => x.id === value || x.name === value) : null;\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple', 'select'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [labelFor]=\"uniqueId\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<input [id]=\"uniqueId\" type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label for=\"file\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"control--text\" [innerHTML]=\"file?.name || labels.select_file\"></span>\r\n\t\t\t<svg class=\"upload\"><use xlink:href=\"#upload\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input name=\"file\" type=\"file\" accept=\".pdf,.doc,.docx,*.txt\" class=\"control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (node.hasAttribute('secure')) {\r\n\t\t\t// const name = [...\"abcdefghijklmnopqrsuvwxyz0123456789\"].map((c, i, a) => a[Math.floor(Math.random() * a.length)]).join('');\r\n\t\t\tconst input = node.querySelector('input');\r\n\t\t\tinput.setAttribute('autocomplete', 'new-password');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [labelFor]=\"uniqueId\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<input [id]=\"uniqueId\" type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { from, fromEvent, merge } from 'rxjs';\r\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../common/modal/modal.service';\r\nimport { environment } from '../environment';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlPrivacyComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tif (this.target === 'modal') {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.link$().pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t\t).subscribe();\r\n\t\t\t}, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst inputs = Array.prototype.slice.call(node.querySelectorAll('input'));\r\n\t\tinputs.forEach((input, i) => {\r\n\t\t\t(this.control.value === true && i === 0) || (this.control.value === false && i === 1) ? input.setAttribute('checked', '') : input.removeAttribute('checked');\r\n\t\t});\r\n\t}\r\n\r\n\tonSelect(value) {\r\n\t\tthis.control.value = value;\r\n\t}\r\n\r\n\tlink$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst anchors = Array.prototype.slice.call(node.querySelectorAll('a'));\r\n\t\t// console.log(anchors, node.innerHTML);\r\n\t\treturn merge(...anchors.map(anchor => fromEvent(anchor, 'click'))).pipe(\r\n\t\t\tswitchMap(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\t\t\tconst anchor = event.target;\r\n\t\t\t\tconst href = anchor.getAttribute('href');\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.href', href);\r\n\t\t\t\treturn from(fetch(href).then(response => response.text()));\r\n\t\t\t}),\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.html', html);\r\n\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\tconst htmlDocument = parser.parseFromString(html, 'text/html');\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.htmlDocument', htmlDocument);\r\n\t\t\t\tlet title = htmlDocument.querySelector('.section--intro-sm .title');\r\n\t\t\t\ttitle = title ? title.innerHTML : null;\r\n\t\t\t\tlet abstract = htmlDocument.querySelector('.section--intro-sm .descritpion');\r\n\t\t\t\tabstract = abstract ? abstract.innerHTML : null;\r\n\t\t\t\tlet description = htmlDocument.querySelector('.section--text .col-md-6');\r\n\t\t\t\tdescription = description ? description.innerHTML : null;\r\n\t\t\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: title, abstract: abstract, description: description } }).pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t\t).subscribe(event => {\r\n\t\t\t\t\t// console.log('ControlPrivacyComponent.link$.genericModal', event);\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nControlPrivacyComponent.meta = {\r\n\tselector: '[control-privacy]',\r\n\tinputs: ['control', 'label', 'target'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--privacy\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<div class=\"group--inputs\">\r\n\t\t\t\t<input type=\"radio\" class=\"control--checkbox\" [id]=\"uniqueId + '_true'\" [name]=\"uniqueId\" [value]=\"true\" (change)=\"onSelect(true)\" />\r\n\t\t\t\t<label [labelFor]=\"uniqueId + '_true'\">\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t\t<span>Acconsento</span>\r\n\t\t\t\t</label>\r\n\t\t\t\t<input type=\"radio\" class=\"control--checkbox\" [id]=\"uniqueId + '_false'\" [name]=\"uniqueId\" [value]=\"false\" (change)=\"onSelect(false)\" />\r\n\t\t\t\t<label [labelFor]=\"uniqueId + '_false'\">\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t\t<span>Non acconsento</span>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"description\">\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t\t<span class=\"required__sign\">*</span>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlSearchComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlSearchComponent.meta = {\r\n\tselector: '[control-search]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<svg class=\"search\"><use xlink:href=\"#search\"></use></svg>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [labelFor]=\"uniqueId\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input [id]=\"uniqueId\" type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [labelFor]=\"uniqueId\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<textarea [id]=\"uniqueId\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [innerHTML]=\"label\" rows=\"4\" [disabled]=\"disabled\"></textarea>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { LabelPipe } from '../common/label/label.pipe';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ErrorsComponent extends ControlComponent {\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = LabelPipe.transform(`error_${key}`);\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TestComponent extends Component {\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"test-component\" *if=\"!('production' | flag)\">\r\n\t\t<div class=\"test-component__title\">development mode</div>\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { ControlCheckboxComponent } from './control-checkbox.component';\r\nimport { ControlCustomSelectComponent } from './control-custom-select.component';\r\nimport { ControlEmailComponent } from './control-email.component';\r\nimport { ControlFileComponent } from './control-file.component';\r\nimport { ControlPasswordComponent } from './control-password.component';\r\nimport { ControlPrivacyComponent } from './control-privacy.component';\r\nimport { ControlSearchComponent } from './control-search.component';\r\nimport { ControlTextComponent } from './control-text.component';\r\nimport { ControlTextareaComponent } from './control-textarea.component';\r\nimport { ErrorsComponent } from './errors.component';\r\nimport { TestComponent } from './test.component';\r\n\r\nconst factories = [\r\n\tControlCheckboxComponent,\r\n\tControlCustomSelectComponent,\r\n\tControlEmailComponent,\r\n\tControlFileComponent,\r\n\tControlPasswordComponent,\r\n\tControlPrivacyComponent,\r\n\t// ControlSelectComponent,\r\n\tControlSearchComponent,\r\n\tControlTextareaComponent,\r\n\tControlTextComponent,\r\n\t// DisabledDirective,\r\n\tErrorsComponent,\r\n\tTestComponent,\r\n\t// ValueDirective,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class ControlsModule extends Module { }\r\n\r\nControlsModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperMainDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.main-hero__bullets',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tprevEl: '.btn--up',\r\n\t\t\t\tnextEl: '.btn--down',\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperMainDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperMainDirective.meta = {\r\n\tselector: '[swiper-main]'\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class ErrorComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.showDetail = false;\r\n\t\t// console.log('ErrorComponent.onInit', this.error);\r\n\t}\r\n\r\n\tonDetailToggle() {\r\n\t\tthis.showDetail = !this.showDetail;\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nErrorComponent.meta = {\r\n\tselector: 'error-component',\r\n\tinputs: ['error'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"error\" (click)=\"onDetailToggle($event)\">\r\n\t\t<div class=\"status\">Error <span [innerHTML]=\"error.status\"></span></div>\r\n\t\t<div class=\"exception-message\" [innerHTML]=\"error.exceptionMessage\"></div>\r\n\t\t<button type=\"button\" class=\"btn--detail\"><svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg></button>\r\n\t</div>\r\n\t<div class=\"error-details\" *if=\"showDetail\">\r\n\t\t<div class=\"message\" [innerHTML]=\"error.message\"></div>\r\n\t\t<div class=\"exception-type\" [innerHTML]=\"error.exceptionType\"></div>\r\n\t\t<div class=\"stack-trace\" [innerHTML]=\"error.stackTrace\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class MenuService {\r\n\r\n\tstatic menu$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentMenu() {\r\n\t\treturn this.menu$_.getValue();\r\n\t}\r\n\r\n\tstatic setMenu(id) {\r\n\t\tthis.menu$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleMenu(id) {\r\n\t\tthis.menu$_.next(this.currentMenu === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.menu$_.next(-1);\r\n\t}\r\n\r\n\tstatic menu$() {\r\n\t\treturn this.menu$_;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class HeaderService {\r\n\r\n\tstatic header$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentHeader() {\r\n\t\treturn this.header$_.getValue();\r\n\t}\r\n\r\n\tstatic setHeader(id) {\r\n\t\tthis.header$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleHeader(id) {\r\n\t\tthis.header$_.next(this.currentHeader === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.header$_.next(-1);\r\n\t}\r\n\r\n\tstatic header$() {\r\n\t\treturn this.header$_;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ScrollService } from '../../common/scroll/scroll.service';\r\nimport { MenuService } from '../menu/menu.service';\r\nimport { HeaderService } from './header.service';\r\n\r\nexport class HeaderComponent extends Component {\r\n\r\n\tdirection_ = null;\r\n\tget direction() {\r\n\t\treturn this.direction_;\r\n\t}\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tnode.classList.remove(`scrolling-${this.direction_}`);\r\n\t\t\tnode.classList.add(`scrolling-${direction}`);\r\n\t\t\tthis.direction_ = direction;\r\n\t\t}\r\n\t}\r\n\r\n\tscrolled_ = null;\r\n\tget scrolled() {\r\n\t\treturn this.scrolled_;\r\n\t}\r\n\tset scrolled(scrolled) {\r\n\t\tif (this.scrolled_ !== scrolled) {\r\n\t\t\tthis.scrolled_ = scrolled;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tscrolled ? node.classList.add(`scrolled`) : node.classList.remove(`scrolled`);\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tbody.setAttribute('class', header !== -1 ? `${header}-active` : '');\r\n\t\t});\r\n\t\tthis.menu = MenuService.currentMenu;\r\n\t\tMenuService.menu$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(menu => {\r\n\t\t\tthis.menu = menu;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tScrollService.scroll$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((event) => {\r\n\t\t\tthis.direction = event.direction;\r\n\t\t\tthis.scrolled = event.scroll.y > 100;\r\n\t\t\t// console.log('HeaderComponent', event.scroll.y, event.direction, event.speed);\r\n\t\t});\r\n\t}\r\n\r\n\tonToggle(id) {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.toggleHeader(id);\r\n\t}\r\n\r\n\tonMenu(id) {\r\n\t\tMenuService.setMenu(id);\r\n\t}\r\n\r\n\tonBack(event) {\r\n\t\tMenuService.onBack();\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: '[header]',\r\n};\r\n","export class LocationService {\r\n\r\n\tstatic has(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.has', params);\r\n\t\treturn params.has(key);\r\n\t}\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.pushParams(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic pushParams(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic replace(from, to) {\r\n\t\tconst history = window.history;\r\n\t\tif (history && history.replaceState) {\r\n\t\t\tconst location = window.location;\r\n\t\t\tconst title = document.title;\r\n\t\t\tif (location.pathname === '/') {\r\n\t\t\t\tconst url = location.origin + to + location.search;\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t} else if (location.href.indexOf(from) !== -1) {\r\n\t\t\t\tconst url = location.href.replace(from, to);\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\n\r\nexport class NewsletterPropositionComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonNewsletter(event) {\r\n\t\tconsole.log('NewsletterPropositionComponent.onNewsletter', this.form.value);\r\n\t\tconst encoded = LocationService.encode('email', this.form.value.email, {});\r\n\t\twindow.location.href = `${this.action}?params=${encoded}`;\r\n\t}\r\n}\r\n\r\nNewsletterPropositionComponent.meta = {\r\n\tselector: '[newsletter-proposition]',\r\n\tinputs: ['action'],\r\n};\r\n","import { Component, getContext } from \"rxcomp\";\r\n\r\nexport class SwitchComponent extends Component {\r\n\r\n\tget path() {\r\n\t\tconst w = 40;\r\n\t\tconst w2 = 60;\r\n\t\tconst h = window.innerHeight;\r\n\t\treturn `path('M0,0 L${w},0 C${w},${h * .25},${w},${h * .75},${w},${h} L${w},${h} L0,${h} L0,0 Z')`;\r\n\t}\r\n\r\n\tget overPath() {\r\n\t\tconst w = 40;\r\n\t\tconst w2 = 60;\r\n\t\tconst h = window.innerHeight;\r\n\t\treturn `path('M0,0 L${w},0 C${w2},${h * .25},${w2},${h * .75},${w},${h} L${w},${h} L0,${h} L0,0 Z')`;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tlet over = false;\r\n\t\tconst onResize = () => {\r\n\t\t\tnode.style.clipPath = over ? this.overPath : this.path;\r\n\t\t};\r\n\t\tconst onOver = () => {\r\n\t\t\tover = true;\r\n\t\t\tgsap.to(node, {\r\n\t\t\t\tduration: 0.5,\r\n\t\t\t\tease: Elastic.easeOut,\r\n\t\t\t\t'clip-path': this.overPath,\r\n\t\t\t});\r\n\t\t};\r\n\t\tconst onOut = () => {\r\n\t\t\tover = false;\r\n\t\t\tgsap.to(node, {\r\n\t\t\t\tduration: 0.5,\r\n\t\t\t\tease: Elastic.easeOut,\r\n\t\t\t\t'clip-path': this.path,\r\n\t\t\t});\r\n\t\t};\r\n\t\tonResize();\r\n\t\twindow.addEventListener('resize', onResize);\r\n\t\tnode.addEventListener('mouseover', onOver);\r\n\t\tnode.addEventListener('mouseout', onOut);\r\n\t}\r\n\r\n}\r\n\r\nSwitchComponent.meta = {\r\n\tselector: '[switch]'\r\n};\r\n\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null, options = {}) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\toptions = Object.assign({\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t}, options, {\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t});\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, response);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { LabelPipe } from '../label/label.pipe';\r\nimport { LocationService } from '../location/location.service';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LanguageService {\r\n\r\n\tstatic languages = this.getDefaultLanguages();\r\n\tstatic defaultLanguage = this.getDefaultLanguage();\r\n\tstatic selectedLanguage = this.defaultLanguage;\r\n\r\n\tstatic get hasLanguages() {\r\n\t\treturn this.languages.length > 1;\r\n\t}\r\n\r\n\tstatic get activeLanguage() {\r\n\t\treturn this.languages.find(language => language.lang === this.selectedLanguage);\r\n\t}\r\n\r\n\tstatic getDefaultLanguages() {\r\n\t\treturn environment.alternates || [];\r\n\t}\r\n\r\n\tstatic getDefaultLanguage() {\r\n\t\treturn environment.defaultLanguage || (this.languages ? this.languages[0].lang : null);\r\n\t}\r\n\r\n\tstatic setLanguage(language) {\r\n\t\tthis.selectedLanguage = language.lang;\r\n\t}\r\n\r\n\tstatic setLanguage$(language) {\r\n\t\treturn from(fetch(language.href).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t})).pipe(\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('html', html);\r\n\t\t\t\tconst labelsMatch = /(window\\.labels\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (labelsMatch) {\r\n\t\t\t\t\t// console.log('labels', labelsMatch[0]);\r\n\t\t\t\t\tnew Function(labelsMatch[0]).call(window);\r\n\t\t\t\t\tLabelPipe.setLabels();\r\n\t\t\t\t}\r\n\t\t\t\tconst bhereMatch = /(window\\.bhere\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (bhereMatch) {\r\n\t\t\t\t\t// console.log('bhere', bhereMatch[0]);\r\n\t\t\t\t\tconst data = {};\r\n\t\t\t\t\tnew Function(bhereMatch[0].replace('window', 'this')).call(data);\r\n\t\t\t\t\tif (data.bhere) {\r\n\t\t\t\t\t\tUtils.merge(environment, data.bhere);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLocationService.replace(this.activeLanguage.href, language.href);\r\n\t\t\t\t// console.log(window.labels);\r\n\t\t\t\tthis.selectedLanguage = language.lang;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toggleLanguages() {\r\n\t\tthis.showLanguages = !this.showLanguages;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n","import { environment } from '../../environment';\r\nimport { HttpService } from '../http/http.service';\r\nimport { LanguageService } from '../language/language.service';\r\n\r\nexport class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = LanguageService.activeLanguage;\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(`${environment.api}${url}`, data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(`${environment.api}${url}`);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(`${environment.api}${url}`, data);\r\n\t}\r\n}\r\n","export class SessionStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\twindow.sessionStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\treturn window.sessionStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSessionStorageSupported() && window.sessionStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.sessionStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSessionStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.sessionStorage.setItem('test', '1');\r\n\t\t\t\twindow.sessionStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { SessionStorageService } from '../../common/storage/session-storage.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport const UserViews = {\r\n\tSIGN_IN: 1,\r\n\tSIGN_UP: 2,\r\n\tFORGOTTEN: 3,\r\n\tEDIT: 4,\r\n};\r\n\r\nexport class User {\r\n\r\n\tget shortName() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport class UserService {\r\n\r\n\tstatic user$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tif (user) {\r\n\t\t\tSessionStorageService.set('user', user);\r\n\t\t} else {\r\n\t\t\tSessionStorageService.delete('user');\r\n\t\t}\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/aquafil/user/data');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic forgot$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/aquafil/user/forgot', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$(`/user/forgot.json`);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\tif (UserService.busyMe) {\r\n\t\t\treturn this.user$_;\r\n\t\t} else {\r\n\t\t\tUserService.busyMe = true;\r\n\t\t\treturn of(1).pipe(\r\n\t\t\t\tswitchMap(_ => {\r\n\t\t\t\t\tif (environment.flags.production) {\r\n\t\t\t\t\t\treturn ApiService.get$(`/aquafil/user/me`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst sessionUser = SessionStorageService.get('user');\r\n\t\t\t\t\t\tif (sessionUser) {\r\n\t\t\t\t\t\t\treturn of(sessionUser);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn ApiService.get$(`/user/me.json`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tmap((user) => {\r\n\t\t\t\t\tconsole.log('UserService.user$', user);\r\n\t\t\t\t\treturn this.mapUser(user);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(_ => of(null)),\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(user);\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t}),\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tstatic signin$(payload) {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/aquafil/user/signin`, payload) : ApiService.get$(`/user/signin.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signout$() {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/aquafil/user/signout`) : ApiService.get$(`/user/signout.json`)\r\n\t\t).pipe(\r\n\t\t\ttap((_) => this.setUser(null)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signup$(payload) {\r\n\t\t// console.log('UserService.signup$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/aquafil/user/signup`, payload) : ApiService.get$(`/user/signup.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => {\r\n\t\t\t\tresponse.user = this.mapUser(response.user);\r\n\t\t\t\treturn response;\r\n\t\t\t}),\r\n\t\t\ttap((response) => this.setUser(response.user)),\r\n\t\t\t//document.location.reload(),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic edit$(payload) {\r\n\t\t// console.log('UserService.edit$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/aquafil/user/edit`, payload) : ApiService.get$(`/user/edit.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => {\r\n\t\t\t\tresponse.user = this.mapUser(response.user);\r\n\t\t\t\treturn response;\r\n\t\t\t}),\r\n\t\t\ttap((response) => this.setUser(response.user)),\r\n\t\t\t//document.location.reload(),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic editPassword$(payload) {\r\n\t\t// console.log('UserService.editPassword$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.post$(`/aquafil/user/edit-password`, payload) :\r\n\t\t\t\tApiService.get$(`/user/edit-password.json`)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic accessData$(payload) {\r\n\t\t// console.log('UserService.accessData$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.post$(`/aquafil/user/access-data`, payload) :\r\n\t\t\t\tApiService.get$(`/user/access-data.json`)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic delete$(payload) {\r\n\t\t// console.log('UserService.delete$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.post$(`/aquafil/user/delete`, payload) :\r\n\t\t\t\tApiService.get$(`/user/delete.json`)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic gdpr$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/aquafil/user/gdpr');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/gdpr.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic tryFacebook$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic tryGoogle$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic tryLinkedin$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic sessionStorage$() {\r\n\t\treturn of(SessionStorageService.get('user') || null);\r\n\t}\r\n\r\n\tstatic mapUser(user) {\r\n\t\treturn user ? new User(user) : null;\r\n\t}\r\n\r\n\tstatic mapUsers(users) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x)) : [];\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserDeleteComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tform.patch({ email: user.email }, true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserDeleteComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.delete$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\tswitchMap(_ => UserService.signout$())\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserDeleteComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"AccessData\",\r\n\t\t\t\t\t'form_name': \"AccessData\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserDeleteComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserDeleteComponent.meta = {\r\n\tselector: '[user-delete]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserDetailComponent extends Component {\r\n\r\n\tget countryName() {\r\n\t\tlet countryName = null;\r\n\t\tif (this.user && this.countries.length) {\r\n\t\t\tconst country = this.countries.find(x => x.value === this.user.country);\r\n\t\t\tif (country) {\r\n\t\t\t\tcountryName = country.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn countryName;\r\n\t}\r\n\r\n\tget occupationName() {\r\n\t\tlet occupationName = null;\r\n\t\tif (this.user && this.occupations.length) {\r\n\t\t\tconst occupation = this.occupations.find(x => x.value === this.user.occupation);\r\n\t\t\tif (occupation) {\r\n\t\t\t\toccupationName = occupation.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn occupationName;\r\n\t}\r\n\r\n\tget newsletterLanguageName() {\r\n\t\tlet newsletterLanguageName = null;\r\n\t\tif (this.user && this.newsletterLanguages.length) {\r\n\t\t\tconst newsletterLanguage = this.newsletterLanguages.find(x => x.value === this.user.newsletterLanguage);\r\n\t\t\tif (newsletterLanguage) {\r\n\t\t\t\tnewsletterLanguageName = newsletterLanguage.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newsletterLanguageName;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.countries = [];\r\n\t\tthis.occupations = [];\r\n\t\tthis.newsletterLanguages = [];\r\n\t\tthis.gdpr = [];\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tUserService.data$(),\r\n\t\t\tUserService.gdpr$(),\r\n\t\t]).pipe(\r\n\t\t\ttap(datas => {\r\n\t\t\t\tconst data = datas[0];\r\n\t\t\t\tthis.countries = data.country.options;\r\n\t\t\t\tthis.occupations = data.occupation.options;\r\n\t\t\t\tthis.newsletterLanguages = data.newsletterLanguage.options;\r\n\t\t\t\tconst gdpr = datas[1];\r\n\t\t\t\tthis.gdpr = gdpr;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonModalUserUpdate(event) {\r\n\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 4 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('UserDetailComponent.onModalSignUp', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonModalGdpr(legalNote) {\r\n\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: legalNote.title, description: legalNote.description } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('UserDetailComponent.onModalGdpr', event);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nUserDetailComponent.meta = {\r\n\tselector: '[user-detail]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserEditPasswordComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\ttokenEncoded: this.tokenEncoded,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserEditPasswordComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.editPassword$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\tswitchMap(_ => UserService.signout$())\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserEditPasswordComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"EditPassword\",\r\n\t\t\t\t\t'form_name': \"EditPassword\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserEditPasswordComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserEditPasswordComponent.meta = {\r\n\tselector: '[user-edit-password]',\r\n\tinputs: ['tokenEncoded'],\r\n};\r\n","\r\nexport class FormService {\r\n\r\n\tstatic toOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\treturn options;\r\n\t}\r\n\r\n\tstatic toSelectOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\toptions.unshift({ id: null, name: 'select' });\r\n\t\treturn options;\r\n\t}\r\n\r\n}\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function RequiredIfValidator(fieldName, formGroup, shouldBe) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tlet field = null;\r\n\t\tif (typeof formGroup === 'function') {\r\n\t\t\tfield = formGroup().get(fieldName);\r\n\t\t} else if (formGroup) {\r\n\t\t\tfield = formGroup.get(fieldName);\r\n\t\t}\r\n\t\treturn (!value && field && (shouldBe != null ? field.value === shouldBe : field.value != null)) ? { required: { value: value, requiredIf: fieldName } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserEditComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.user = null;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tthis.responseMessage = null;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\tnewsletter: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcommercial: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpromotion: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([UserService.data$(), UserService.me$()]).pipe(\r\n\t\t\ttap(results => {\r\n\t\t\t\tconst data = results[0];\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tconst user = results[1];\r\n\t\t\t\tthis.user = user;\r\n\t\t\t\tif (user) {\r\n\t\t\t\t\tconst form = this.form;\r\n\t\t\t\t\tform.patch(user, true);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tthis.responseMessage = null;\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserEditComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.edit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserEditComponent.onSubmit', response);\r\n\t\t\t\tthis.responseMessage = response.responseMessage;\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\t/*\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\t*/\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserEditComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserEditComponent.meta = {\r\n\tselector: '[user-edit]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserForgotComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.forgot$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserForgotComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Forgot\",\r\n\t\t\t\t\t'form_name': \"Recupero Password\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.forgot.next(true);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserForgotComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n\r\n\tonSignUp() {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserForgotComponent.meta = {\r\n\tselector: '[user-forgot]',\r\n\toutputs: ['forgot', 'viewSignIn', 'viewSignUp'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { UserService, UserViews } from './user.service';\r\n\r\nexport class UserComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = UserViews;\r\n\t\tthis.view = this.view || UserViews.SIGN_UP;\r\n\t}\r\n\r\n\tonModalSignIn(event) {\r\n\t\t// console.log('UserComponent.onModalSignIn');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('UserComponent.onModalSignIn', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonModalSignUp(event) {\r\n\t\t// console.log('UserComponent.onModalSignUp');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 2, skipAutoClose: true } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('UserComponent.onModalSignUp', event);\r\n\t\t});\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.scrollTo(node, { offset: -100 });\r\n\t}\r\n\r\n\tonViewSignIn(event) {\r\n\t\t// console.log('UserComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp(event) {\r\n\t\t// console.log('UserComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonViewForgot(event) {\r\n\t\t// console.log('UserComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('UserComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('UserComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgot(email) {\r\n\t\t/*\r\n\t\tconsole.log('UserComponent.onForgot', email);\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nUserComponent.meta = {\r\n\tselector: '[user]',\r\n\tinputs: ['navTo', 'view']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { UserComponent } from './user.component';\r\nimport { UserViews } from './user.service';\r\n\r\nexport class UserModalComponent extends UserComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\tthis.me = data.me;\r\n\t\t\tthis.skipAutoClose = data.skipAutoClose;\r\n\t\t\t// console.log('UserModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = window.innerWidth >= 1024 ? node.querySelector('.modal__inner') : node;\r\n\t\ttarget.scrollTo(0, 0);\r\n\t}\r\n\r\n\tonViewForgot() {\r\n\t\tconsole.log('UserModalComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn() {\r\n\t\tconsole.log('UserModalComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp() {\r\n\t\tconsole.log('UserModalComponent.onViewSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('UserModalComponent.onSignUp', user);\r\n\t\tif (!this.skipAutoClose) {\r\n\t\t\tModalService.resolve(user);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('UserModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nUserModalComponent.meta = {\r\n\tselector: '[user-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSigninComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signin$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSigninComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Signin\",\r\n\t\t\t\t\t'form_name': \"Login\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signIn.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSigninComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\tthis.viewForgot.next();\r\n\t}\r\n\r\n\tonSignUp(event) {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserSigninComponent.meta = {\r\n\tselector: '[user-signin]',\r\n\toutputs: ['signIn', 'viewForgot', 'viewSignUp'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function MatchValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\tif (!value || !field) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport MatchValidator from '../../controls/match.validator';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.me = this.me || {};\r\n\t\tthis.user = this.user || null;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tthis.responseMessage = null;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(this.me.firstName || null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(this.me.lastName || null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(this.me.email || null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), MatchValidator('password', form)]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\tnewsletter: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcommercial: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpromotion: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t\tpasswordConfirm: '********',\r\n\t\t\tprivacy: true,\r\n\t\t\tnewsletter: false,\r\n\t\t\tcommercial: false,\r\n\t\t\tpromotion: false,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tthis.responseMessage = null;\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSignupComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signup$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSignupComponent.onSubmit', response);\r\n\t\t\t\tthis.responseMessage = response.responseMessage;\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signUp.next(response.user);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSignupComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n}\r\n\r\nUserSignupComponent.meta = {\r\n\tselector: '[user-signup]',\r\n\toutputs: ['signUp', 'viewSignIn'],\r\n\tinputs: ['me', 'user'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { SwiperMainDirective } from '../partials/swiper-main/swiper-main.directive';\r\nimport { ErrorComponent } from './error/error.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { NewsletterPropositionComponent } from './newsletter-proposition/newsletter-proposition.component';\r\nimport { SwitchComponent } from './switch/switch.component';\r\nimport { UserDeleteComponent } from './user/user-delete.component';\r\nimport { UserDetailComponent } from './user/user-detail.component';\r\nimport { UserEditPasswordComponent } from './user/user-edit-password.component';\r\nimport { UserEditComponent } from './user/user-edit.component';\r\nimport { UserForgotComponent } from './user/user-forgot.component';\r\nimport { UserModalComponent } from './user/user-modal.component';\r\nimport { UserSigninComponent } from './user/user-signin.component';\r\nimport { UserSignupComponent } from './user/user-signup.component';\r\nimport { UserComponent } from './user/user.component';\r\n\r\nconst factories = [\r\n\tErrorComponent,\r\n\tHeaderComponent,\r\n\tNewsletterPropositionComponent,\r\n\tSwiperMainDirective,\r\n\tSwitchComponent,\r\n\tUserComponent,\r\n\tUserDeleteComponent,\r\n\tUserEditComponent,\r\n\tUserEditPasswordComponent,\r\n\tUserForgotComponent,\r\n\tUserModalComponent,\r\n\tUserDetailComponent,\r\n\tUserSigninComponent,\r\n\tUserSignupComponent,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class SharedModule extends Module { }\r\n\r\nSharedModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from './app.component';\r\nimport { CommonModule } from './common/common.module';\r\nimport { ControlsModule } from './controls/controls.module';\r\nimport { SharedModule } from './shared/shared.module';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t\tCommonModule,\r\n\t\tControlsModule,\r\n\t\tSharedModule,\r\n\t],\r\n\tdeclarations: [\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport { AppModule } from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}