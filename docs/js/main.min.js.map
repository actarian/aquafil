{"version":3,"sources":["src/js/main.js","../../src/js/common/modal/modal.service.js","../../src/js/common/scroll/scroll.service.js","../../src/js/common/utils/utils.js","../../src/js/environment.js","../../src/js/environment.static.js","../../src/js/environment.served.js","../../src/js/common/http/http.service.js","../../src/js/common/label/label.pipe.js","../../src/js/common/location/location.service.js","../../src/js/common/language/language.service.js","../../src/js/common/api/api.service.js","../../src/js/common/storage/local-storage.service.js","../../src/js/shared/header/header.service.js","../../src/js/shared/cart-mini/cart-mini.service.js","../../src/js/pages/cart/cart.service.js","../../src/js/common/storage/session-storage.service.js","../../src/js/shared/user/user.service.js","../../src/js/app.component.js","../../src/js/common/alt/alt.directive.js","../../src/js/common/click-outside/click-outside.directive.js","../../src/js/common/date/date.pipe.js","../../src/js/common/download/download.directive.js","../../src/js/common/locomotive-scroll/locomotive-scroll.service.js","../../src/js/common/dropdown/dropdown.directive.js","../../src/js/common/dropdown/dropdown-item.directive.js","../../src/js/common/env/env.pipe.js","../../src/js/common/filter/filter-item.component.js","../../src/js/common/flag/flag.pipe.js","../../src/js/common/highlight/highlight.pipe.js","../../src/js/common/html/html.pipe.js","../../src/js/common/id/id.directive.js","../../src/js/common/label-for/label-for.directive.js","../../src/js/common/modal/modal-outlet.component.js","../../src/js/common/name/name.directive.js","../../src/js/common/number/number.pipe.js","../../src/js/common/relative-date/relative-date.pipe.js","../../src/js/common/scroll/scroll-sticky.directive.js","../../src/js/common/share/share.directive.js","../../src/js/common/slug/slug.pipe.js","../../src/js/common/svg/svg-icon.structure.js","../../src/js/common/swiper/swiper.directive.js","../../src/js/common/thron/thron.service.js","../../src/js/common/thron/thron.component.js","../../src/js/common/title/title.directive.js","../../src/js/common/common.module.js","../../src/js/controls/control.component.js","../../src/js/controls/control-checkbox.component.js","../../src/js/common/keyboard/keyboard.service.js","../../src/js/controls/control-custom-select.component.js","../../src/js/controls/control-email.component.js","../../src/js/controls/control-file.component.js","../../src/js/controls/control-password.component.js","../../src/js/controls/control-privacy.component.js","../../src/js/controls/control-search.component.js","../../src/js/controls/control-text.component.js","../../src/js/controls/control-textarea.component.js","../../src/js/controls/errors.component.js","../../src/js/controls/test.component.js","../../src/js/controls/controls.module.js","../../src/js/partials/swiper-main/swiper-main.directive.js","../../src/js/shared/error/error.component.js","../../src/js/shared/menu/menu.service.js","../../src/js/shared/header/header.component.js","../../src/js/shared/newsletter-proposition/newsletter-proposition.component.js","../../src/js/shared/switch/switch.component.js","../../src/js/common/gtm/gtm.service.js","../../src/js/shared/user/user-delete.component.js","../../src/js/shared/user/user-detail.component.js","../../src/js/shared/user/user-edit-password.component.js","../../src/js/controls/form.service.js","../../src/js/controls/required-if.validator.js","../../src/js/shared/user/user-edit.component.js","../../src/js/shared/user/user-forgot.component.js","../../src/js/shared/user/user.component.js","../../src/js/shared/user/user-modal.component.js","../../src/js/shared/user/user-signin.component.js","../../src/js/controls/match.validator.js","../../src/js/shared/user/user-signup.component.js","../../src/js/shared/shared.module.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","ModalEvent","data","ModalResolveEvent","_ModalEvent","apply","arguments","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","_this","busy$","next","getTemplate$","src","pipe","map","template","node","getNode","tap","modal$","hasModal","switchMap","events$","_","load$","url","from","fetch","then","response","text","div","document","createElement","innerHTML","firstElementChild","reject","resolve","Subject","ScrollService","scroll","scroll$","init$","fromEvent","window","delay","event","direction","x","y","speed","previousY","pageYOffset","addEventListener","Math","abs","scrollTo","options","offset","body","querySelector","currentTop","scrollTop","distance","getBoundingClientRect","top","pow","gsap","set","scroll-behavior","disableLerp","to","duration","ease","Quad","easeOut","overwrite","onUpdate","onComplete","scrollToSelector","selector","ReplaySubject","Utils","merge","source","keys","forEach","Array","isArray","NODE","BASE_HREF","get","URLSearchParams","location","search","getAttribute","HEROKU","host","indexOf","STATIC","port","DEVELOPMENT","split","ENV","PRODUCTION","Environment","_proto","assign","getAbsoluteUrl","path","params","origin","replace","getPath","isLocal","href","console","log","githubDocs","defaultOptions","flags","production","heroku","slug","markets","defaultMarket","currentMarket","languages","defaultLanguage","currentLanguage","labels","select","browse","cancel","error_email","error_match","error_required","loading","remove","required","select_file","update","upload","drag_and_drop_images","environmentOptions","cart","api","assets","configureProduct","reservedArea","careersModal","genericModal","marketsAndLanguagesModal","materialsModal","ordersModal","projectsRegistrationModal","userModal","facebook","appId","fields","scope","tokenClient","version","google","clientId","linkedIn","clientSecret","googleMaps","apiKey","thron","workers","image","prefetch","environment","HttpService","http$","method","format","userPass","response_","headers","Accept","Content-Type","JSON","stringify","undefined","credentials","btoa","Headers","typedResponse","contentType","json","ok","Promise","error","warn","catchError","throwError","getError","get$","query","delete$","post$","put$","patch$","object","status","statusCode","statusMessage","statusText","LabelPipe","_Pipe","transform","labels_","getKeys","_len","_key","join","setLabels","LABELS","Pipe","meta","name","LocationService","has","keyOrValue","pushParams","history","pushState","title","toString","replaceState","pathname","state","deserialize","encoded","decode","serialize","encode","decoded","atob","parse","LanguageService","getDefaultLanguages","alternates","getDefaultLanguage","lang","setLanguage","language","selectedLanguage","setLanguage$","html","labelsMatch","exec","Function","call","bhereMatch","bhere","activeLanguage","toggleLanguages","showLanguages","pushChanges","_this2","find","ApiService","_HttpService","LocalStorageService","delete","isLocalStorageSupported","localStorage","removeItem","exist","e","cache","push","setItem","supported","HeaderService","setHeader","id","header$_","toggleHeader","currentHeader","onBack","header$","getValue","BehaviorSubject","CartMiniService","hasItem","item","items","currentItems","setItems","skip","STORAGE_KEY","items$_","items$","localItems","of","incrementItem$","slice","item_","qty","decrementItem$","removeItem$","addItem$","price","index","splice","removeAll$","getPrice$","getPriceAndAddItem$","match","code","showefy","internalstr","reduce","CartService","setStep","step","currentCart","setCart","cart$_","cart$","localCart","clear$","data$","estimatedDelivery$","getDeliveryType$","getStores$","getDiscount$","payload","doPayment$","SessionStorageService","isSessionStorageSupported","sessionStorage","UserViews","SIGN_IN","SIGN_UP","FORGOTTEN","EDIT","User","firstName","substr","toUpperCase","lastName","UserService","setUser","user","user$_","forgot$","me$","busyMe","sessionUser","mapUser","signin$","signout$","_this3","signup$","_this4","edit$","_this5","editPassword$","accessData$","gdpr$","tryFacebook$","me","tryGoogle$","tryLinkedin$","sessionStorage$","mapUsers","users","AppComponent","_Component","onInit","getContext","classList","takeUntil","unsubscribe$","subscribe","header","onOpenMarketAndLanguage","onLogin","view","onLogout","first","onProjectRegistration","onAddToCart","onOpenMiniCart","Component","AltDirective","_Directive","onChanges","setAttribute","alt","Directive","inputs","ClickOutsideDirective","initialFocus","_getContext","parentInstance","event$","filter","contains","shareReplay","expression","outputFunction","makeFunction","clickOutside$","DatePipe","Intl","DateTimeFormat","Date","DownloadDirective","download","LocomotiveScrollService","init","useKeyboard","smoothMobile","inertia","smooth","lerp","getDirection","getSpeed","initClass","scrollingClass","draggingClass","smoothClass","scrollbarContainer","scrollbarClass","multiplier","firefoxMultiplier","touchMultiplier","scrollFromAnywhere","gestureDirection","reloadOnContextChange","resetNativeScroll","el","useLocomotiveScroll","instance","LocomotiveScroll","add","innerWidth","isTouchDevice","userAgent","navigator","toLowerCase","isTablet","test","isSmartphone","isMacLike","platform","isIOS","isMacOs","isSafari","vendor","on","style","pointerEvents","stop","start","DROPDOWN_ID","DropdownDirective","trigger","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","addDocumentListeners","dropped","removeDocumentListeners","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","outputs","DropdownItemDirective","enter$","leave$","EnvPipe","keypath","env","k","shift","FilterItemComponent","closeFilter","active","change","toggleFilter","filters","clearFilter","preventDefault","stopImmediatePropagation","clear","onEnter","onLeave","FlagPipe","HighlightPipe","escapedQuery","escapeRegexChars","regExp","RegExp","g1","g2","safeToString","trim","encodeHTML","decodeHTML","HtmlPipe","m","n","String","fromCharCode","parseInt","unescapes","rx","IdDirective","LabelForDirective","labelFor","ModalOutletComponent","busy_","modalNode","busy","modal_","removeChild","appendChild","compile","NameDirective","NumberPipe","NumberFormat","DIVISIONS","amount","Number","POSITIVE_INFINITY","RelativeDatePipe","numeric","date","formatter","RelativeTimeFormat","division","round","ScrollStickyDirective","args","concat","targetNode","until","sticky$","rect","bottom","innerHeight","offsetHeight","sticked","height","min","sticked_","ShareDirective","share","open","encodeURI","encodeURIComponent","c","charCodeAt","facebookUrl","pinterestUrl","linkedInUrl","twitterUrl","whatsappUrl","mailToUrl","shareTitle","shareUrl","SlugPipe","SvgIconStructure","_Structure","name_","parentNode","_element$classList","element","createElementNS","w","width","h","setAttributeNS","rxcompId","replaceChild","Structure","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","autoplay","keyboardControl","mousewheelControl","pagination","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","hasPrev","activeIndex","slides","hasNext","slidePrev","slideNext","opacity","slideChange","addListeners_","callback","swiperDirectiveInit","Power2","setTimeout","Swiper","_opening","destroy","matchMedia","matches","ThronService","thron$","THRONContentExperience","THRONPlayer","script","loaded$","head","ID","ThronComponent","THRON","media","splitted","controls","hasAttribute","loop","player","muted","displayLinked","noSkin","onReady","onCanPlay","onPlaying","onPlay","onPause","video","mediaContainer","ready","canPlay","off","qualities","qualityLevels","highestQuality","currentQuality","playing","play","pause","complete","playVideo","pauseVideo","toggle","playing_","TitleDirective","title_","removeAttribute","factories","pipes","CommonModule","_Module","Module","imports","declarations","UID","ControlComponent","uid","label","control","ControlCheckboxComponent","_ControlComponent","link$","anchors","querySelectorAll","anchor","stopPropagation","htmlDocument","DOMParser","parseFromString","abstract","description","KeyboardService","keydown$","keydown$_","keyup$","keyup$_","keys$","keys$_","type","startWith","key$","key$_","regexp","typing$","typing$_","typing","clearTimeout","ControlCustomSelectComponent","dropdownId","word","scrollToWord","children","offsetTop","setOption","isMultiple","TypeError","_readOnlyError","hasOption","getLabel","v","onDropped","$event","touched","multiple","ControlEmailComponent","ControlFileComponent","file","onReaderComplete","onInputDidChange","files","lastModified","lastModifiedDate","size","reader","FileReader","readAsDataURL","content","result","ControlPasswordComponent","ControlPrivacyComponent","input","onSelect","ControlSearchComponent","disabled","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","onTest","onReset","reset","ControlsModule","SwiperMainDirective","_SwiperDirective","navigation","prevEl","nextEl","ErrorComponent","showDetail","onDetailToggle","MenuService","setMenu","menu$_","toggleMenu","currentMenu","menu$","HeaderComponent","menu","pictogram","scrolled","max","onToggle","direction_","scrolled_","NewsletterPropositionComponent","FormGroup","email","FormControl","Validators","RequiredValidator","changes$","onNewsletter","action","SwitchComponent","over","onResize","clipPath","overPath","Elastic","clip-path","GtmService","dataLayer","push_","UserDeleteComponent","success","EmailValidator","password","checkRequest","antiforgery","checkField","patch","onSubmit","valid","submitted","form_name","UserDetailComponent","countries","occupations","newsletterLanguages","gdpr","combineLatest","datas","country","occupation","newsletterLanguage","onModalUserUpdate","onModalGdpr","legalNote","countryName","occupationName","newsletterLanguageName","UserEditPasswordComponent","tokenEncoded","FormService","toOptions","toSelectOptions","unshift","RequiredIfValidator","fieldName","formGroup","shouldBe","FormValidator","field","requiredIf","UserEditComponent","responseMessage","city","company","privacy","RequiredTrueValidator","newsletter","commercial","promotion","results","UserForgotComponent","forgot","onSignIn","viewSignIn","onSignUp","viewSignUp","UserComponent","views","onModalSignIn","onModalSignUp","skipAutoClose","setView","onViewSignIn","onViewSignUp","onViewForgot","navTo","onForgot","UserModalComponent","_UserComponent","onClose","UserSigninComponent","signIn","viewForgot","UserSignupComponent","passwordConfirm","signUp","SharedModule","AppModule","CoreModule","FormModule","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\n// export class ModalLoadEvent extends ModalEvent { }\r\n// export class ModalLoadedEvent extends ModalEvent { }\r\nexport class ModalResolveEvent extends ModalEvent { }\r\nexport class ModalRejectEvent extends ModalEvent { }\r\n\r\nexport class ModalService {\r\n\r\n\tstatic hasModal = false;\r\n\r\n\tstatic open$(modal) {\r\n\t\tthis.busy$.next(true);\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\t// startWith(new ModalLoadEvent(Object.assign({}, modal.data, { $src: modal.src }))),\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => {\r\n\t\t\t\tthis.modal$.next(node);\r\n\t\t\t\tthis.hasModal = true;\r\n\t\t\t\tthis.busy$.next(false);\r\n\t\t\t\t// this.events$.next(new ModalLoadedEvent(Object.assign({}, modal.data, { $src: modal.src })));\r\n\t\t\t}),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t\ttap(_ => this.hasModal = false)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\nModalService.busy$ = new Subject();\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class ScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('ScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'DOMContentLoaded').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t/*\r\n\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\tlet previousY = body.scrollTop;\r\n\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\tconst y = body.scrollTop;\r\n\t\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t\tif (Math.abs(y - previousY) > 90) {\r\n\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tScrollService.scroll(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true);\r\n\t\t\t\t*/\r\n\t\t\t\tlet previousY = window.pageYOffset;\r\n\t\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\t\tconst y = window.pageYOffset;\r\n\t\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t\tif (Math.abs(y - previousY) > 90) {\r\n\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\tScrollService.scroll(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true)\r\n\t\t\t\treturn ScrollService.scroll$;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic scrollTo(target, options = { offset: -130 }) {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tconst currentTop = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\tconst targetTop = currentTop + target.getBoundingClientRect().top + options.offset;\r\n\t\tconst distance = targetTop - currentTop;\r\n\t\tconst o = { pow: 0 };\r\n\t\tgsap.set(body, {\r\n\t\t\t'scroll-behavior': 'auto'\r\n\t\t});\r\n\t\tif (options.disableLerp) {\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scrollTop': currentTop + distance\r\n\t\t\t});\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tgsap.to(o, {\r\n\t\t\t\tduration: Math.abs(distance) / 2000,\r\n\t\t\t\tpow: 1,\r\n\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\toverwrite: 'all',\r\n\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t'scrollTop': currentTop + distance * o.pow\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// window.scrollTo(0, currentTop + distance * o.pow);\r\n\t\t\t\t},\r\n\t\t\t\tonComplete: () => {\r\n\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// target.scrollIntoView();\r\n\t}\r\n\r\n\tstatic scrollToSelector(selector, options) {\r\n\t\tconst target = document.querySelector(selector);\r\n\t\tif (target) {\r\n\t\t\tScrollService.scrollTo(target, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","\r\nexport class Utils {\r\n\r\n\tstatic merge(target, source) {\r\n\t\tif (typeof source === 'object') {\r\n\t\t\tObject.keys(source).forEach(key => {\r\n\t\t\t\tconst value = source[key];\r\n\t\t\t\tif (typeof value === 'object' && !Array.isArray(value)) {\r\n\t\t\t\t\ttarget[key] = this.merge(target[key], value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n\r\n}\r\n","import { Utils } from './common/utils/utils';\r\nimport { environmentServed } from './environment.served';\r\nimport { environmentStatic } from './environment.static';\r\n\r\nexport const NODE = (typeof module !== 'undefined' && module.exports);\r\nexport const PARAMS = NODE ? { get: () => { } } : new URLSearchParams(window.location.search);\r\nexport const DEBUG = false || (PARAMS.get('debug') != null);\r\nexport const BASE_HREF = NODE ? null : document.querySelector('base').getAttribute('href');\r\nexport const HEROKU = NODE ? false : (window && window.location.host.indexOf('herokuapp') !== -1);\r\nexport const STATIC = NODE ? false : (HEROKU || (window && (window.location.port === '48481' || window.location.port === '5000' || window.location.port === '6443' || window.location.host === 'actarian.github.io')));\r\nexport const DEVELOPMENT = NODE ? false : (window && ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1);\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n\r\nexport class Environment {\r\n\r\n\tget STATIC() {\r\n\t\treturn ENV.STATIC;\r\n\t}\r\n\tset STATIC(STATIC) {\r\n\t\tENV.STATIC = (STATIC === true || STATIC === 'true');\r\n\t\tconsole.log('Environment.STATIC.set', ENV.STATIC);\r\n\t}\r\n\r\n\tget href() {\r\n\t\tif (HEROKU) {\r\n\t\t\treturn this.githubDocs;\r\n\t\t} else {\r\n\t\t\treturn BASE_HREF;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAbsoluteUrl(path, params) {\r\n\t\tlet url = `${window.location.origin}${path}`;\r\n\t\t// let url = `${window.location.protocol}//${window.location.host}${path}`;\r\n\t\tObject.keys(params).forEach(key => {\r\n\t\t\turl = url.replace(`$${key}`, params[key]);\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tgetPath(path) {\r\n\t\treturn this.isLocal(path) ? (this.href + path) : path;\r\n\t}\r\n\r\n\tisLocal(path) {\r\n\t\treturn path.indexOf('://') === -1;\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultOptions = {\r\n\tport: 5000,\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\theroku: HEROKU,\r\n\t},\r\n\tslug: {},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tlabels: {\r\n\t\tselect: 'Seleziona',\r\n\t\tbrowse: 'Sfoglia',\r\n\t\tcancel: 'Annulla',\r\n\t\terror_email: 'Email non valida',\r\n\t\terror_match: 'I campi non corrispondono',\r\n\t\terror_required: 'Campo obbligatorio',\r\n\t\tloading: 'caricamento',\r\n\t\tremove: 'Rimuovi',\r\n\t\trequired: 'Richiesto',\r\n\t\tselect_file: 'Seleziona una file...',\r\n\t\tupdate: 'Aggiorna',\r\n\t\tupload: 'Carica',\r\n\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t}\r\n};\r\n\r\nconst environmentOptions = window.STATIC ? environmentStatic : environmentServed;\r\n\r\nlet options = Object.assign(defaultOptions, environmentOptions);\r\noptions = Utils.merge(options, window.environment);\r\n\r\nexport const environment = new Environment(options);\r\n\r\n// console.log('environment', environment);\r\n","\r\nexport const environmentStatic = {\r\n\tflags: {\r\n\t\tproduction: false,\r\n\t\tcart: true,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/aquafil/api',\r\n\tassets: '/aquafil/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/aquafil/products-configure.html`,\r\n\t\tcart: `/aquafil/cart.html`,\r\n\t\treservedArea: `/aquafil/reserved-area.html`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tcareersModal: '/aquafil/partials/modals/careers-modal.html',\r\n\t\t\tgenericModal: '/aquafil/partials/modals/generic-modal.html',\r\n\t\t\tmarketsAndLanguagesModal: '/aquafil/partials/modals/markets-and-languages-modal.html',\r\n\t\t\tmaterialsModal: '/aquafil/partials/modals/materials-modal.html',\r\n\t\t\tordersModal: '/aquafil/partials/modals/orders-modal.html',\r\n\t\t\tprojectsRegistrationModal: '/aquafil/partials/modals/projects-registration-modal.html',\r\n\t\t\tuserModal: '/aquafil/partials/modals/user-modal.html',\r\n\t\t}\r\n\t},\r\n\tfacebook: {\r\n\t\tappId: 610048027052371,\r\n\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\r\n\t\tscope: 'public_profile, email', // publish_stream\r\n\t\ttokenClient: '951b013fe59b05cf471d869aae9ba6ba',\r\n\t\tversion: 'v11.0',\r\n\t},\r\n\tgoogle: {\r\n\t\tclientId: '760742757246-61qknlmthbmr54bh7ch19kjr0sftm4q3.apps.googleusercontent.com',\r\n\t},\r\n\tlinkedIn: {\r\n\t\tclientId: '77cg5ls5lgu3k3',\r\n\t\tclientSecret: 'gfBIl365EdckxCgK',\r\n\t\tscope: 'r_emailaddress r_liteprofile',\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyDvGw6iAoKdRv8mmaC9GeT-LWLPQtA8p60',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: './js/workers/image.service.worker.js',\r\n\t\tprefetch: './js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/aquafil/main/docs/',\r\n};\r\n","\r\nexport const environmentServed = {\r\n\tflags: {\r\n\t\tproduction: true,\r\n\t\tcart: true,\r\n\t},\r\n\tmarkets: ['IT', 'EU', 'AM', 'AS', 'IN'],\r\n\tdefaultMarket: 'IT',\r\n\tcurrentMarket: 'IT',\r\n\tlanguages: ['it', 'en', 'de', 'ch'],\r\n\tdefaultLanguage: 'it',\r\n\tcurrentLanguage: 'it',\r\n\tapi: '/api',\r\n\tassets: '/Client/docs/',\r\n\tslug: {\r\n\t\tconfigureProduct: `/it/it/products-configure`,\r\n\t\tcart: `/it/it/cart`,\r\n\t\treservedArea: `/it/it/reserved-area`,\r\n\t},\r\n\ttemplate: {\r\n\t\tmodal: {\r\n\t\t\tcareersModal: '/template/modals/careers-modal.cshtml',\r\n\t\t\tgenericModal: '/template/modals/generic-modal.cshtml',\r\n\t\t\tmarketsAndLanguagesModal: '/template/modals/markets-and-languages-modal.cshtml',\r\n\t\t\tmaterialsModal: '/template/modals/materials-modal.cshtml',\r\n\t\t\tordersModal: '/template/modals/orders-modal.cshtml',\r\n\t\t\tprojectsRegistrationModal: '/template/modals/projects-registration-modal.cshtml',\r\n\t\t\tuserModal: '/template/modals/user-modal.cshtml',\r\n\t\t}\r\n\t},\r\n\tfacebook: {\r\n\t\tappId: 610048027052371,\r\n\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\r\n\t\tscope: 'public_profile, email', // publish_stream\r\n\t\ttokenClient: '951b013fe59b05cf471d869aae9ba6ba',\r\n\t\tversion: 'v11.0',\r\n\t},\r\n\tgoogle: {\r\n\t\tclientId: '760742757246-61qknlmthbmr54bh7ch19kjr0sftm4q3.apps.googleusercontent.com',\r\n\t},\r\n\tlinkedIn: {\r\n\t\tclientId: '77cg5ls5lgu3k3',\r\n\t\tclientSecret: 'gfBIl365EdckxCgK',\r\n\t\tscope: 'r_emailaddress r_liteprofile',\r\n\t},\r\n\tgoogleMaps: {\r\n\t\tapiKey: 'AIzaSyByTXqwtyFUcD6d4PY7ab4GBwS5IYjEVcc',\r\n\t},\r\n\tthron: {\r\n\t\tclientId: '',\r\n\t},\r\n\tworkers: {\r\n\t\timage: '/Client/docs/js/workers/image.service.worker.js',\r\n\t\tprefetch: '/Client/docs/js/workers/prefetch.service.worker.js',\r\n\t},\r\n\tgithubDocs: 'https://raw.githubusercontent.com/actarian/aquafil/main/docs/',\r\n};\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\nexport class HttpResponse {\r\n\r\n\tget static() {\r\n\t\treturn this.url.indexOf('.json') === this.url.length - 5;\r\n\t}\r\n\r\n\tconstructor(response) {\r\n\t\tthis.data = null;\r\n\t\tif (response) {\r\n\t\t\tthis.url = response.url;\r\n\t\t\tthis.status = response.status;\r\n\t\t\tthis.statusText = response.statusText;\r\n\t\t\tthis.ok = response.ok;\r\n\t\t\tthis.redirected = response.redirected;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json', userPass = null, options = {}) {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\t// url = this.getUrl(url, format);\r\n\t\toptions = Object.assign({\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t}, options, {\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t});\r\n\t\tif (userPass) {\r\n\t\t\t// options.mode = 'no-cors';\r\n\t\t\toptions.credentials = 'include';\r\n\t\t\tuserPass = window.btoa(userPass);\r\n\t\t\toptions.headers['Authorization'] = `Basic ${userPass}`;\r\n\t\t}\r\n\t\toptions.headers = new Headers(options.headers);\r\n\t\treturn from(fetch(url, options).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\treturn typedResponse;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\t\treturn Promise.reject(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\t// !!! todo mapping response.data\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tconst body = (data && methods.indexOf(method) !== -1) ? JSON.stringify(data) : undefined;\r\n\t\tconst queryString = (data && methods.indexOf(method) !== -1) ? Object.keys(data).map(function(key) {\r\n\t\t\treturn key + '=' + encodeURI(data[key]);\r\n\t\t}).join('&') : undefined;\r\n\t\tif (queryString) {\r\n\t\t\turl = `${url}?${queryString}`;\r\n\t\t}\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(url, {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: body,\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = new HttpResponse(response);\r\n\t\t\ttry {\r\n\t\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\t\tlet typedResponse;\r\n\t\t\t\tif (contentType && format === 'json' && contentType.indexOf('application/json') !== -1) {\r\n\t\t\t\t\ttypedResponse = response.json();\r\n\t\t\t\t} else if (format === 'blob') {\r\n\t\t\t\t\ttypedResponse = response.blob();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypedResponse = response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn typedResponse.then(data => {\r\n\t\t\t\t\tresponse_.data = data;\r\n\t\t\t\t\tif (response.ok) {\r\n\t\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject(response_);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(error) {\r\n\t\t\t\tif (response.ok) {\r\n\t\t\t\t\tconsole.warn('HttpService.http$', 'Cannot parse response');\r\n\t\t\t\t\treturn Promise.resolve(response_);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(this.getError(error, response_));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\t*/\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.status) {\r\n\t\t\terror.status = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\t// console.log('HttpService.getError', error, response);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LabelPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst labels = LabelPipe.labels_;\r\n\t\treturn labels[key] || key; // `#${key}#`;\r\n\t}\r\n\r\n\tstatic getKeys(...keys) {\r\n\t\treturn LabelPipe.transform(keys.map(x => x.replace('-', '_')).join('_'));\r\n\t}\r\n\r\n\tstatic setLabels() {\r\n\t\tconst LABELS = Utils.merge({\r\n\t\t\tselect: 'Seleziona',\r\n\t\t\tbrowse: 'Sfoglia',\r\n\t\t\tcancel: 'Annulla',\r\n\t\t\terror_email: 'Email non valida',\r\n\t\t\terror_match: 'I campi non corrispondono',\r\n\t\t\terror_required: 'Campo obbligatorio',\r\n\t\t\tloading: 'caricamento',\r\n\t\t\tremove: 'Rimuovi',\r\n\t\t\trequired: 'Richiesto',\r\n\t\t\tselect_file: 'Seleziona una file...',\r\n\t\t\tupdate: 'Aggiorna',\r\n\t\t\tupload: 'Carica',\r\n\t\t\tdrag_and_drop_images: 'Drag And Drop your images here',\r\n\t\t}, environment.labels);\r\n\t\tthis.labels_ = LABELS;\r\n\t}\r\n}\r\n\r\nLabelPipe.setLabels();\r\n\r\nLabelPipe.meta = {\r\n\tname: 'label',\r\n};\r\n","export class LocationService {\r\n\r\n\tstatic has(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.has', params);\r\n\t\treturn params.has(key);\r\n\t}\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.pushParams(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic pushParams(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic replace(from, to) {\r\n\t\tconst history = window.history;\r\n\t\tif (history && history.replaceState) {\r\n\t\t\tconst location = window.location;\r\n\t\t\tconst title = document.title;\r\n\t\t\tif (location.pathname === '/') {\r\n\t\t\t\tconst url = location.origin + to + location.search;\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t} else if (location.href.indexOf(from) !== -1) {\r\n\t\t\t\tconst url = location.href.replace(from, to);\r\n\t\t\t\thistory.replaceState(history.state, title, url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { from } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from '../../environment';\r\nimport { LabelPipe } from '../label/label.pipe';\r\nimport { LocationService } from '../location/location.service';\r\nimport { Utils } from '../utils/utils';\r\n\r\nexport class LanguageService {\r\n\r\n\tstatic languages = this.getDefaultLanguages();\r\n\tstatic defaultLanguage = this.getDefaultLanguage();\r\n\tstatic selectedLanguage = this.defaultLanguage;\r\n\r\n\tstatic get hasLanguages() {\r\n\t\treturn this.languages.length > 1;\r\n\t}\r\n\r\n\tstatic get activeLanguage() {\r\n\t\treturn this.languages.find(language => language.lang === this.selectedLanguage);\r\n\t}\r\n\r\n\tstatic getDefaultLanguages() {\r\n\t\treturn environment.alternates || [];\r\n\t}\r\n\r\n\tstatic getDefaultLanguage() {\r\n\t\treturn environment.defaultLanguage || (this.languages ? this.languages[0].lang : null);\r\n\t}\r\n\r\n\tstatic setLanguage(language) {\r\n\t\tthis.selectedLanguage = language.lang;\r\n\t}\r\n\r\n\tstatic setLanguage$(language) {\r\n\t\treturn from(fetch(language.href).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t})).pipe(\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('html', html);\r\n\t\t\t\tconst labelsMatch = /(window\\.labels\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (labelsMatch) {\r\n\t\t\t\t\t// console.log('labels', labelsMatch[0]);\r\n\t\t\t\t\tnew Function(labelsMatch[0]).call(window);\r\n\t\t\t\t\tLabelPipe.setLabels();\r\n\t\t\t\t}\r\n\t\t\t\tconst bhereMatch = /(window\\.bhere\\s*=\\s*\\n*\\s*\\{((\\{.+?\\})|.)+?\\})/gms.exec(html);\r\n\t\t\t\tif (bhereMatch) {\r\n\t\t\t\t\t// console.log('bhere', bhereMatch[0]);\r\n\t\t\t\t\tconst data = {};\r\n\t\t\t\t\tnew Function(bhereMatch[0].replace('window', 'this')).call(data);\r\n\t\t\t\t\tif (data.bhere) {\r\n\t\t\t\t\t\tUtils.merge(environment, data.bhere);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLocationService.replace(this.activeLanguage.href, language.href);\r\n\t\t\t\t// console.log(window.labels);\r\n\t\t\t\tthis.selectedLanguage = language.lang;\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic toggleLanguages() {\r\n\t\tthis.showLanguages = !this.showLanguages;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n","import { environment } from '../../environment';\r\nimport { HttpService } from '../http/http.service';\r\nimport { LanguageService } from '../language/language.service';\r\n\r\nexport class ApiService extends HttpService {\r\n\r\n\tstatic currentLanguage = LanguageService.activeLanguage;\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\treturn super.get$(`${environment.api}${url}`, data, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn super.delete$(`${environment.api}${url}`);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn super.post$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn super.put$(`${environment.api}${url}`, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn super.patch$(`${environment.api}${url}`, data);\r\n\t}\r\n}\r\n","export class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class HeaderService {\r\n\r\n\tstatic header$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentHeader() {\r\n\t\treturn this.header$_.getValue();\r\n\t}\r\n\r\n\tstatic setHeader(id) {\r\n\t\tthis.header$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleHeader(id) {\r\n\t\tthis.header$_.next(this.currentHeader === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.header$_.next(-1);\r\n\t}\r\n\r\n\tstatic header$() {\r\n\t\treturn this.header$_;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\nimport { environment } from '../../environment';\r\nimport { HeaderService } from '../header/header.service';\r\n\r\nexport class CartMiniService {\r\n\r\n\tstatic get STORAGE_KEY() {\r\n\t\treturn `cartItems_${environment.currentMarket}`;\r\n\t}\r\n\r\n\tstatic items$_ = new BehaviorSubject([]);\r\n\r\n\tstatic get currentItems() {\r\n\t\treturn CartMiniService.items$_.getValue();\r\n\t}\r\n\r\n\tstatic get count() {\r\n\t\treturn CartMiniService.currentItems.length;\r\n\t}\r\n\r\n\tstatic hasItem(item) {\r\n\t\tconst items = CartMiniService.currentItems;\r\n\t\tconst index = CartMiniService.indexOf(item, items);\r\n\t\treturn index !== -1;\r\n\t}\r\n\r\n\tstatic setItems(items, skip) {\r\n\t\tif (items) {\r\n\t\t\tLocalStorageService.set(CartMiniService.STORAGE_KEY, items);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete(CartMiniService.STORAGE_KEY);\r\n\t\t}\r\n\t\tif (!skip) {\r\n\t\t\tCartMiniService.items$_.next(items);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic items$() {\r\n\t\tconst localItems = LocalStorageService.get(CartMiniService.STORAGE_KEY) || [];\r\n\t\treturn of(localItems).pipe(\r\n\t\t\tswitchMap(items => {\r\n\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\treturn CartMiniService.items$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic incrementItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty++;\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item_;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic decrementItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tswitchMap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty--;\r\n\t\t\t\t\tif (item_.qty > 0) {\r\n\t\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\t\treturn of(item_);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn CartMiniService.removeItem$(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn of(null);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic addItem$(item, qty = 1) {\r\n\t\t// const count = CartMiniService.count;\r\n\t\treturn of(Object.assign({}, item, { qty })).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst item_ = CartMiniService.find(item, items);\r\n\t\t\t\tif (item_) {\r\n\t\t\t\t\titem_.qty += item.qty;\r\n\t\t\t\t\titem_.price = item.price;\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item_;\r\n\t\t\t\t} else {\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\ttap(_ => {\r\n\t\t\t\t// if (count === 0) {\r\n\t\t\t\tHeaderService.setHeader('cart');\r\n\t\t\t\t// }\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeItem$(item) {\r\n\t\treturn of(item).pipe(\r\n\t\t\tmap(item => {\r\n\t\t\t\tconst items = CartMiniService.currentItems.slice();\r\n\t\t\t\tconst index = CartMiniService.indexOf(item, items);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\titems.splice(index, 1);\r\n\t\t\t\t\tif (items.length === 0) {\r\n\t\t\t\t\t\tHeaderService.onBack();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic removeAll$() {\r\n\t\treturn of([]).pipe(\r\n\t\t\tmap(items => {\r\n\t\t\t\tHeaderService.onBack();\r\n\t\t\t\tCartMiniService.setItems(items);\r\n\t\t\t\treturn items;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic getPrice$(item) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/cart-mini/price', item);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart-mini/price.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getPriceAndAddItem$(item, qty = 1) {\r\n\t\treturn CartMiniService.getPrice$(item).pipe(\r\n\t\t\tswitchMap(item => CartMiniService.addItem$(item, qty)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic match(item, item_) {\r\n\t\treturn item_.id === item.id && item_.code === item.code && ((!item_.showefy && !item.showefy) || (item_.showefy && item.showefy && item_.showefy.internalstr === item.showefy.internalstr));\r\n\t}\r\n\r\n\tstatic find(item, items) {\r\n\t\treturn items.find(item_ => CartMiniService.match(item, item_));\r\n\t}\r\n\r\n\tstatic indexOf(item, items) {\r\n\t\treturn items.reduce((p, item_, i) => {\r\n\t\t\treturn p !== -1 ? p : (CartMiniService.match(item, item_) ? i : p);\r\n\t\t}, -1);\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { LocalStorageService } from '../../common/storage/local-storage.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../../shared/cart-mini/cart-mini.service';\r\n\r\nexport const CartSteps = {\r\n\tNone: 0,\r\n\tItems: 1,\r\n\tData: 2,\r\n\tDelivery: 3,\r\n\tRecap: 4,\r\n\tPayment: 5,\r\n\tComplete: 6,\r\n\tError: -1,\r\n};\r\n\r\n/*\r\nexport class Cart {\r\n\tconstructor() {\r\n\t\tthis.step = CartSteps.Items; // number\r\n\t\tthis.items = []; // CartItem[]\r\n\t\tthis.shipmentCountry = null; // number\r\n\t\tthis.user = null; // User\r\n\t\tthis.guest = null; // boolean\r\n\t\tthis.data = {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\temail: null, // string\r\n\t\t\ttelephone: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // number\r\n\t\t\tmessage: null, // string\r\n\t\t\tinvoice: null, // boolean\r\n\t\t\tinvoiceData: {\r\n\t\t\t\ttaxNumber: null, // string\r\n\t\t\t\tsdi: null, // string\r\n\t\t\t\tpec: null, // string\r\n\t\t\t},\r\n\t\t\tbilling: null, // boolean\r\n\t\t\tbillingData: {\r\n\t\t\t\tcompany: null, // string\r\n\t\t\t\tfirstName: null, // string\r\n\t\t\t\tlastName: null, // string\r\n\t\t\t\ttelephone: null, // string\r\n\t\t\t\taddress: null, // string\r\n\t\t\t\tzipCode: null, // string\r\n\t\t\t\tcity: null, // string\r\n\t\t\t\tprovince: null, // string\r\n\t\t\t\tcountry: null, // number\r\n\t\t\t},\r\n\t\t\tconditions: false, // boolean\r\n\t\t\tprivacy: false, // boolean\r\n\t\t\tterms: false, // boolean\r\n\t\t};\r\n\t\tthis.deliveryData = null; // {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\temail: null, // string\r\n\t\t\ttelephone: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // { id: number, name: string }\r\n\t\t}\r\n\t\tthis.billingData = null; // {\r\n\t\t\tfirstName: null, // string\r\n\t\t\tlastName: null, // string\r\n\t\t\taddress: null, // string\r\n\t\t\tzipCode: null, // string\r\n\t\t\tcity: null, // string\r\n\t\t\tprovince: null, // string\r\n\t\t\tcountry: null, // { id: number, name: string }\r\n\t\t}\r\n\t\tthis.deliveryType = null; // number\r\n\t\tthis.delivery = null; // { id: number, name: string }\r\n\t\tthis.discountCode = null; // string\r\n\t\tthis.discount = null; // { code: string, price: number }\r\n\t\tthis.paymentMethod = null; // number\r\n\t\tthis.store = null; // Store\r\n\t}\r\n}\r\n*/\r\n\r\nexport class CartService {\r\n\r\n\tstatic get STORAGE_KEY() {\r\n\t\treturn `cart_${environment.currentMarket}`;\r\n\t}\r\n\r\n\tstatic cart$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentCart() {\r\n\t\treturn CartService.cart$_.getValue();\r\n\t}\r\n\r\n\tstatic setStep(step) {\r\n\t\tconst cart = CartService.currentCart;\r\n\t\tif (cart) {\r\n\t\t\tcart.step = step;\r\n\t\t\tCartService.setCart(cart);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic setCart(cart, skip) {\r\n\t\tif (cart) {\r\n\t\t\tLocalStorageService.set(CartService.STORAGE_KEY, cart);\r\n\t\t} else {\r\n\t\t\tLocalStorageService.delete(CartService.STORAGE_KEY);\r\n\t\t}\r\n\t\tif (!skip) {\r\n\t\t\tCartService.cart$_.next(cart);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic cart$() {\r\n\t\tconst localCart = LocalStorageService.get(CartService.STORAGE_KEY) || null;\r\n\t\treturn of(localCart).pipe(\r\n\t\t\tswitchMap(cart => {\r\n\t\t\t\tCartService.setCart(cart);\r\n\t\t\t\treturn CartService.cart$_;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic clear$() {\r\n\t\treturn of(null).pipe(\r\n\t\t\tmap(cart => {\r\n\t\t\t\tCartMiniService.setItems([]);\r\n\t\t\t\tCartService.setCart(cart);\r\n\t\t\t\treturn cart;\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/cart/data');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic estimatedDelivery$(cart) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/cart/estimated-delivery', cart);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/estimated-delivery.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDeliveryType$(cart) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/cart/delivery-type', cart);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/delivery-type.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getStores$(cart) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/cart/stores', cart);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/stores.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDiscount$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/cart/discount', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/cart/discount.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic doPayment$(cart) {\r\n\t\treturn (environment.flags.production ? ApiService.post$('/cart/payment', cart) : ApiService.get$('/cart/payment.json')).pipe(\r\n\t\t\ttap(_ => {\r\n\t\t\t\t// !!! clearing cart with skip option!\r\n\t\t\t\tCartMiniService.setItems([], true);\r\n\t\t\t\tCartService.setCart(cart, true);\r\n\t\t\t}),\r\n\t\t)\r\n\t}\r\n}\r\n","export class SessionStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\twindow.sessionStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\treturn window.sessionStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isSessionStorageSupported() && window.sessionStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isSessionStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.sessionStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('SessionStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSessionStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.sessionStorage.setItem('test', '1');\r\n\t\t\t\twindow.sessionStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n}\r\n","import { BehaviorSubject, of } from 'rxjs';\r\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\r\nimport { ApiService } from '../../common/api/api.service';\r\nimport { SessionStorageService } from '../../common/storage/session-storage.service';\r\nimport { environment } from '../../environment';\r\n\r\nexport const UserViews = {\r\n\tSIGN_IN: 1,\r\n\tSIGN_UP: 2,\r\n\tFORGOTTEN: 3,\r\n\tEDIT: 4,\r\n};\r\n\r\nexport class User {\r\n\r\n\tget shortName() {\r\n\t\treturn (this.firstName || '?').substr(0, 1).toUpperCase() + (this.lastName || '?').substr(0, 1).toUpperCase();\r\n\t}\r\n\r\n\tget fullName() {\r\n\t\treturn this.firstName + ' ' + this.lastName;\r\n\t}\r\n\r\n\tconstructor(data) {\r\n\t\tif (data) {\r\n\t\t\tObject.assign(this, data);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport class UserService {\r\n\r\n\tstatic user$_ = new BehaviorSubject(null);\r\n\r\n\tstatic get currentUser() {\r\n\t\treturn this.user$_.getValue();\r\n\t}\r\n\r\n\tstatic setUser(user) {\r\n\t\tif (user) {\r\n\t\t\tSessionStorageService.set('user', user);\r\n\t\t} else {\r\n\t\t\tSessionStorageService.delete('user');\r\n\t\t}\r\n\t\tthis.user$_.next(user);\r\n\t}\r\n\r\n\tstatic data$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/aquafil/user/data');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/data.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic forgot$(payload) {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.post$('/aquafil/user/forgot', payload);\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$(`/user/forgot.json`);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\tif (UserService.busyMe) {\r\n\t\t\treturn this.user$_;\r\n\t\t} else {\r\n\t\t\tUserService.busyMe = true;\r\n\t\t\treturn of(1).pipe(\r\n\t\t\t\tswitchMap(_ => {\r\n\t\t\t\t\tif (environment.flags.production) {\r\n\t\t\t\t\t\treturn ApiService.get$(`/aquafil/user/me`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst sessionUser = SessionStorageService.get('user');\r\n\t\t\t\t\t\tif (sessionUser) {\r\n\t\t\t\t\t\t\treturn of(sessionUser);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn ApiService.get$(`/user/me.json`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tmap((user) => {\r\n\t\t\t\t\tconsole.log('UserService.user$', user);\r\n\t\t\t\t\treturn this.mapUser(user);\r\n\t\t\t\t}),\r\n\t\t\t\tcatchError(_ => of(null)),\r\n\t\t\t\tswitchMap(user => {\r\n\t\t\t\t\tthis.setUser(user);\r\n\t\t\t\t\treturn this.user$_;\r\n\t\t\t\t}),\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tstatic signin$(payload) {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/aquafil/user/signin`, payload) : ApiService.get$(`/user/signin.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => this.mapUser(response)),\r\n\t\t\ttap((user) => this.setUser(user)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signout$() {\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/aquafil/user/signout`) : ApiService.get$(`/user/signout.json`)\r\n\t\t).pipe(\r\n\t\t\ttap((_) => this.setUser(null)),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic signup$(payload) {\r\n\t\t// console.log('UserService.signup$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/aquafil/user/signup`, payload) : ApiService.get$(`/user/signup.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => {\r\n\t\t\t\tresponse.user = this.mapUser(response.user);\r\n\t\t\t\treturn response;\r\n\t\t\t}),\r\n\t\t\ttap((response) => this.setUser(response.user)),\r\n\t\t\t//document.location.reload(),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic edit$(payload) {\r\n\t\t// console.log('UserService.edit$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ? ApiService.post$(`/aquafil/user/edit`, payload) : ApiService.get$(`/user/edit.json`)\r\n\t\t).pipe(\r\n\t\t\tmap((response) => {\r\n\t\t\t\tresponse.user = this.mapUser(response.user);\r\n\t\t\t\treturn response;\r\n\t\t\t}),\r\n\t\t\ttap((response) => this.setUser(response.user)),\r\n\t\t\t//document.location.reload(),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic editPassword$(payload) {\r\n\t\t// console.log('UserService.editPassword$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.post$(`/aquafil/user/edit-password`, payload) :\r\n\t\t\t\tApiService.get$(`/user/edit-password.json`)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic accessData$(payload) {\r\n\t\t// console.log('UserService.accessData$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.post$(`/aquafil/user/access-data`, payload) :\r\n\t\t\t\tApiService.get$(`/user/access-data.json`)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic delete$(payload) {\r\n\t\t// console.log('UserService.delete$', payload);\r\n\t\treturn (\r\n\t\t\tenvironment.flags.production ?\r\n\t\t\t\tApiService.post$(`/aquafil/user/delete`, payload) :\r\n\t\t\t\tApiService.get$(`/user/delete.json`)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic gdpr$() {\r\n\t\tif (environment.flags.production) {\r\n\t\t\treturn ApiService.get$('/aquafil/user/gdpr');\r\n\t\t} else {\r\n\t\t\treturn ApiService.get$('/user/gdpr.json');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic tryFacebook$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic tryGoogle$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic tryLinkedin$(me) {\r\n\t\treturn of(null);\r\n\t}\r\n\r\n\tstatic sessionStorage$() {\r\n\t\treturn of(SessionStorageService.get('user') || null);\r\n\t}\r\n\r\n\tstatic mapUser(user) {\r\n\t\treturn user ? new User(user) : null;\r\n\t}\r\n\r\n\tstatic mapUsers(users) {\r\n\t\treturn users ? users.map(x => UserService.mapUser(x)) : [];\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { ModalResolveEvent, ModalService } from './common/modal/modal.service';\r\nimport { ScrollService } from './common/scroll/scroll.service';\r\nimport { environment } from './environment';\r\nimport { CartService } from './pages/cart/cart.service';\r\nimport { CartMiniService } from './shared/cart-mini/cart-mini.service';\r\nimport { HeaderService } from './shared/header/header.service';\r\nimport { UserService } from './shared/user/user.service';\r\n\r\nexport class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\t// console.log('AppComponent.onInit');\r\n\r\n\t\tScrollService.init$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe();\r\n\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tCartMiniService.items$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(_ => this.pushChanges());\r\n\t}\r\n\r\n\tonOpenMarketAndLanguage() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.marketsAndLanguagesModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onOpenMarketAndLanguage', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonProjectRegistration(event) {\r\n\t\tModalService.open$({ src: environment.template.modal.projectsRegistrationModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('AppComponent.onProjectRegistration', event);\r\n\t\t\t/*\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t// window.location.href = environment.slug.reservedArea;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t});\r\n\t}\r\n\r\n\tonAddToCart(item) {\r\n\t\t// resetting purchase procedure\r\n\t\tCartService.setCart(null);\r\n\t\t// getting showefy price and adding to mini cart\r\n\t\tCartMiniService.getPriceAndAddItem$(item).pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(_ => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonOpenMiniCart() {\r\n\t\tHeaderService.setHeader('cart');\r\n\t}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class AltDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('alt', this.alt);\r\n\t}\r\n\r\n}\r\n\r\nAltDirective.meta = {\r\n\tselector: '[[alt]]',\r\n\tinputs: ['alt']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class DatePipe extends Pipe {\r\n\r\n\tstatic transform(value, options = {}, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\treturn new Intl.DateTimeFormat(language, options).format(value instanceof Date ? value : new Date(value));\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tstatic transform(value, locale = 'it-IT-u-ca-gregory', options = {\r\n\t\tdateStyle: 'short',\r\n\t\ttimeStyle: 'short',\r\n\t}) {\r\n\t\tconst localeDateString = new Date(value).toLocaleDateString(locale, options);\r\n\t\treturn localeDateString;\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nDatePipe.meta = {\r\n\tname: 'date',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class DownloadDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('download', this.download);\r\n\t}\r\n\r\n}\r\n\r\nDownloadDirective.meta = {\r\n\tselector: '[[download]]',\r\n\tinputs: ['download']\r\n};\r\n","import { fromEvent, ReplaySubject } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nexport class LocomotiveScrollService {\r\n\r\n\tstatic scroll$ = new ReplaySubject(1);\r\n\tstatic scroll(scroll) {\r\n\t\t// console.log('LocomotiveScrollService.scroll', scroll);\r\n\t\tthis.scroll$.next(scroll);\r\n\t}\r\n\r\n\tstatic init(node, options) {\r\n\t\toptions = Object.assign({\r\n\t\t\tuseKeyboard: true,\r\n\t\t\tsmoothMobile: true,\r\n\t\t\tinertia: 0.5,\r\n\t\t\t// name:'scroll',\r\n\t\t\t// offset: [0,0], // bottom top\r\n\t\t\t// repeat: false,\r\n\t\t\tsmooth: true,\r\n\t\t\t// initPosition: { x: 0, y: 0 }\r\n\t\t\t// direction: 'vertical',\r\n\t\t\tlerp: 0.01,\r\n\t\t\tgetDirection: true, // add direction to scroll event\r\n\t\t\tgetSpeed: true, // add speed to scroll event\r\n\t\t\t// class: 'is-inview',\r\n\t\t\tinitClass: 'has-scroll-init',\r\n\t\t\tscrollingClass: 'has-scroll-scrolling',\r\n\t\t\tdraggingClass: 'has-scroll-dragging',\r\n\t\t\tsmoothClass: 'has-scroll-smooth',\r\n\t\t\tscrollbarContainer: false,\r\n\t\t\tscrollbarClass: 'c-scrollbar',\r\n\t\t\tmultiplier: 1,\r\n\t\t\tfirefoxMultiplier: 50,\r\n\t\t\ttouchMultiplier: 2,\r\n\t\t\tscrollFromAnywhere: true,\r\n\t\t\tgestureDirection: 'vertical',\r\n\t\t\treloadOnContextChange: false,\r\n\t\t\tresetNativeScroll: true,\r\n\t\t}, options, {\r\n\t\t\tel: node,\r\n\t\t});\r\n\t\tif (this.useLocomotiveScroll()) {\r\n\t\t\tconst instance = new LocomotiveScroll(options);\r\n\t\t\tLocomotiveScrollService.instance = instance;\r\n\t\t\treturn instance;\r\n\t\t} else {\r\n\t\t\tdocument.querySelector('html').classList.add('has-scroll-init');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic useLocomotiveScroll() {\r\n\t\treturn window.innerWidth >= 768 && !this.isTouchDevice();\r\n\t}\r\n\r\n\tstatic isTouchDevice() {\r\n\t\tconst userAgent = navigator.userAgent.toLowerCase();\r\n\t\tconst isTablet = /(mac|ipad|tablet|(android(?!.*mobile))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent);\r\n\t\tconst isSmartphone = /(ipod|iphone|(android(?!.*mobile))|(windows(?!.*phone)(.*touch)))/.test(userAgent);\r\n\t\treturn isTablet || isSmartphone;\r\n\t}\r\n\r\n\tstatic isMacLike() {\r\n\t\tconst isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isMacLike;\r\n\t}\r\n\r\n\tstatic isIOS() {\r\n\t\tconst isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\t\treturn isIOS;\r\n\t}\r\n\r\n\tstatic isMacOs() {\r\n\t\tconst isMacOs = navigator.platform.toLowerCase().indexOf('mac') >= 0;\r\n\t\treturn isMacOs;\r\n\t}\r\n\r\n\tstatic isSafari() {\r\n\t\tconst isSafari = navigator.vendor.match(/apple/i) &&\r\n\t\t\t!navigator.userAgent.match(/crios/i) &&\r\n\t\t\t!navigator.userAgent.match(/fxios/i);\r\n\t\treturn isSafari;\r\n\t}\r\n\r\n\tstatic init$(node) {\r\n\t\treturn fromEvent(window, 'DOMContentLoaded').pipe(\r\n\t\t\tdelay(1),\r\n\t\t\tswitchMap(_ => {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\tconst instance = LocomotiveScrollService.init(node);\r\n\t\t\t\tif (instance) {\r\n\t\t\t\t\tconst showefy = document.querySelector('#showefy');\r\n\t\t\t\t\tinstance.on('scroll', instance => {\r\n\t\t\t\t\t\tLocomotiveScrollService.scroll(instance);\r\n\t\t\t\t\t\tif (showefy) {\r\n\t\t\t\t\t\t\tconst isShowefyDisabled = instance.speed > 0.1;\r\n\t\t\t\t\t\t\tif (isShowefyDisabled) {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents !== 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'none';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (showefy.style.pointerEvents === 'none') {\r\n\t\t\t\t\t\t\t\t\tshowefy.style.pointerEvents = 'auto';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst event = { direction: null, scroll: { x: 0, y: 0 }, speed: 0 };\r\n\t\t\t\t\tconst body = document.querySelector('body');\r\n\t\t\t\t\tlet previousY = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\tbody.addEventListener('scroll', () => {\r\n\t\t\t\t\t\tconst y = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\t\t\t\tconst direction = y >= previousY ? 'down' : 'up';\r\n\t\t\t\t\t\tif (Math.abs(y - previousY) > 90) {\r\n\t\t\t\t\t\t\t// console.log('scroll', y, direction);\r\n\t\t\t\t\t\t\tpreviousY = y;\r\n\t\t\t\t\t\t\tevent.direction = direction;\r\n\t\t\t\t\t\t\tevent.scroll.y = y;\r\n\t\t\t\t\t\t\tLocomotiveScrollService.scroll(event);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn LocomotiveScrollService.scroll$;\r\n\t\t\t\t// }, 1);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.update();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stop() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.stop();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic start() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.start();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollTo(target, options = { offset: -130 }) {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.scrollTo(target, options);\r\n\t\t} else {\r\n\t\t\tconst body = document.querySelector('body');\r\n\t\t\tconst currentTop = body.scrollTop; // window.pageYOffset; // body.scrollTop;\r\n\t\t\tconst targetTop = currentTop + target.getBoundingClientRect().top + options.offset;\r\n\t\t\tconst distance = targetTop - currentTop;\r\n\t\t\tconst o = { pow: 0 };\r\n\t\t\tgsap.set(body, {\r\n\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t});\r\n\t\t\tif (options.disableLerp) {\r\n\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t'scrollTop': currentTop + distance\r\n\t\t\t\t});\r\n\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tgsap.to(o, {\r\n\t\t\t\t\tduration: Math.abs(distance) / 2000,\r\n\t\t\t\t\tpow: 1,\r\n\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t\t'scrollTop': currentTop + distance * o.pow\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// window.scrollTo(0, currentTop + distance * o.pow);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\tgsap.set(body, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// target.scrollIntoView();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic scrollToSelector(selector, options) {\r\n\t\tconst target = document.querySelector(selector);\r\n\t\tif (target) {\r\n\t\t\tLocomotiveScrollService.scrollTo(target, options);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../locomotive-scroll/locomotive-scroll.service';\r\nimport { DropdownDirective } from './dropdown.directive';\r\n\r\nexport class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t\t// LocomotiveScrollService.stop();\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t\t// LocomotiveScrollService.start();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.enter$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\tthis.leave$(node).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tenter$(node) {\r\n\t\t// const { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'mouseenter').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tLocomotiveScrollService.stop();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tleave$(node) {\r\n\t\t// const { node } = getContext(this);\r\n\t\treturn fromEvent(node, 'mouseleave').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tLocomotiveScrollService.start();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\tonEnter(event) {\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonLeave(event) {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.addEventListener('mouseenter', this.onEnter);\r\n\t\tnode.addEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.removeEventListener('mouseenter', this.onEnter);\r\n\t\tnode.removeEventListener('mouseleave', this.onLeave);\r\n\t}\r\n\t*/\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class EnvPipe extends Pipe {\r\n\r\n\tstatic transform(keypath) {\r\n\t\tlet env = environment;\r\n\t\tconst keys = keypath.split('.');\r\n\t\tlet k = keys.shift();\r\n\t\twhile (keys.length > 0 && env[k]) {\r\n\t\t\tenv = env[k];\r\n\t\t\tk = keys.shift();\r\n\t\t}\r\n\t\tconst value = env[k] || null;\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\nEnvPipe.meta = {\r\n\tname: 'env',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../locomotive-scroll/locomotive-scroll.service';\r\n\r\nexport class FilterItemComponent extends Component {\r\n\r\n\tonInit() {\r\n\r\n\t}\r\n\r\n\tcloseFilter() {\r\n\t\tthis.filter.active = false;\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tclearFilter(event, filter) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopImmediatePropagation();\r\n\t\tfilter.clear();\r\n\t\tthis.change.next();\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tonEnter() {\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tonLeave() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nFilterItemComponent.meta = {\r\n\tselector: '[filter], [[filter]]',\r\n\toutputs: ['change'],\r\n\tinputs: ['filter', 'filters', 'name'],\r\n\ttemplate: /* html */`\r\n\t\t<div class=\"group--filter\" (click)=\"toggleFilter(filter)\" (clickOutside)=\"closeFilter(filter)\">\r\n\t\t\t<span class=\"label\" [innerHTML]=\"filter.getLabel() || name\"></span>\r\n\t\t\t<svg class=\"caret-down\" *if=\"!filter.hasAny()\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<svg class=\"close-sm\" *if=\"filter.hasAny()\" (click)=\"clearFilter($event, filter)\"><use xlink:href=\"#close-sm\"></use></svg>\r\n\t\t</div>\r\n\t\t<div class=\"options\" *if=\"filter.active\" (mouseenter)=\"onEnter()\" (mouseleave)=\"onLeave()\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"name\"></div>\r\n\t\t\t<ul class=\"nav--options\">\r\n\t\t\t\t<li class=\"nav--options__item\" [class]=\"{ active: filter.has(item), disabled: item.disabled, empty: !item.value }\" *for=\"let item of filter.options\">\r\n\t\t\t\t\t<span class=\"option\" (click)=\"filter.set(item)\">\r\n\t\t\t\t\t\t<span class=\"name\" [innerHTML]=\"item.label | label\"></span>\r\n\t\t\t\t\t\t<!-- <span class=\"count\" [innerHTML]=\"item.count || ''\"></span> -->\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t`,\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class FlagPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst flags = environment.flags;\r\n\t\treturn flags[key] || false;\r\n\t}\r\n\r\n}\r\n\r\nFlagPipe.meta = {\r\n\tname: 'flag',\r\n};\r\n","\r\nimport { Pipe } from 'rxcomp';\r\n\r\nexport class HighlightPipe extends Pipe {\r\n\r\n\tstatic transform(text, query) {\r\n\t\tif (!query) {\r\n\t\t\treturn text;\r\n\t\t}\r\n\t\tif (!Array.isArray(query)) {\r\n\t\t\tquery = [query];\r\n\t\t}\r\n\t\t// text = HighlightPipe.encodeHTML(text);\r\n\t\tconst escapedQuery = query.map(x => HighlightPipe.escapeRegexChars(x));\r\n\t\tconst regExp = new RegExp(`(\\<[^\\>]+\\>)|(${escapedQuery.join('|')})`, 'gmi');\r\n\t\t// const regExp = new RegExp(`(?<!\\<)${escapedQuery.join('(?![\\w\\s]*[\\>])|(?<!\\<)')}(?![\\w\\s]*[\\>])`, 'gmi');\r\n\t\t// const regExp = new RegExp('&[^;]+;|' + escapedQuery.join('|'), 'gi');\r\n\t\ttext = text.replace(regExp, function(match, g1, g2) {\r\n\t\t\tif (g1) {\r\n\t\t\t\treturn g1;\r\n\t\t\t} else {\r\n\t\t\t\treturn '<b>' + g2 + '</b>';\r\n\t\t\t}\r\n\t\t\t// return match.toLowerCase() === x.toLowerCase() ? '<strong>' + match + '</strong>' : match;\r\n\t\t});\r\n\t\t// text = HighlightPipe.decodeHTML(text);\r\n\t\tconsole.log(text, query);\r\n\t\treturn text;\r\n\t}\r\n\r\n\tstatic escapeRegexChars(text) {\r\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n\t}\r\n\r\n\tstatic safeToString(text) {\r\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\r\n\t}\r\n\r\n\tstatic encodeHTML(text) {\r\n\t\treturn this.safeToString(text)\r\n\t\t\t.replace(/&/g, '&amp;')\r\n\t\t\t.replace(/</g, '&lt;')\r\n\t\t\t.replace(/>/g, '&gt;');\r\n\t}\r\n\r\n\tstatic decodeHTML(text) {\r\n\t\treturn text\r\n\t\t\t.replace(/&amp;/g, '&')\r\n\t\t\t.replace(/&lt;/g, '<')\r\n\t\t\t.replace(/&gt;/g, '>');\r\n\t}\r\n\r\n}\r\n\r\nHighlightPipe.meta = {\r\n\tname: 'highlight',\r\n};\r\n\r\n","import { Pipe } from 'rxcomp';\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class IdDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('id', this.id);\r\n\t}\r\n\r\n}\r\n\r\nIdDirective.meta = {\r\n\tselector: '[[id]]',\r\n\tinputs: ['id']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class LabelForDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('for', this.labelFor);\r\n\t}\r\n\r\n}\r\n\r\nLabelForDirective.meta = {\r\n\tselector: '[[labelFor]]',\r\n\tinputs: ['labelFor']\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ModalService } from './modal.service';\r\n\r\nexport class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tget busy() {\r\n\t\treturn this.busy_;\r\n\t}\r\n\r\n\tset busy(busy) {\r\n\t\t// console.log('ModalOutletComponent set busy', busy, this);\r\n\t\tif (this.busy_ !== busy) {\r\n\t\t\tthis.busy_ = busy;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.busy_ = false;\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => this.modal = modal);\r\n\t\tModalService.busy$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(busy => this.busy = busy);\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal, busy: busy }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t\t<!-- spinner -->\r\n\t\t<div class=\"spinner spinner--contrasted\" *if=\"busy\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class NameDirective extends Directive {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.setAttribute('name', this.name);\r\n\t}\r\n\r\n}\r\n\r\nNameDirective.meta = {\r\n\tselector: '[[name]]',\r\n\tinputs: ['name']\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class NumberPipe extends Pipe {\r\n\r\n\tstatic transform(value, options = {}, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\treturn new Intl.NumberFormat(language, options).format(value);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNumberPipe.meta = {\r\n\tname: 'number',\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nconst DIVISIONS = [\r\n\t{ amount: 60, name: 'seconds' },\r\n\t{ amount: 60, name: 'minutes' },\r\n\t{ amount: 24, name: 'hours' },\r\n\t{ amount: 7, name: 'days' },\r\n\t{ amount: 4.34524, name: 'weeks' },\r\n\t{ amount: 12, name: 'months' },\r\n\t{ amount: Number.POSITIVE_INFINITY, name: 'years' }\r\n];\r\n\r\nexport class RelativeDatePipe extends Pipe {\r\n\r\n\tstatic transform(value, options = { numeric: 'auto' }, language = null) { // = 'en-IN'\r\n\t\tif (value != null) { // !!! keep losing\r\n\t\t\tconst date = value instanceof Date ? value : new Date(value);\r\n\t\t\tlanguage = language || environment.currentLanguage;\r\n\t\t\tconst formatter = new Intl.RelativeTimeFormat(language, options);\r\n\t\t\tlet duration = (date - new Date()) / 1000;\r\n\t\t\tfor (let i = 0; i <= DIVISIONS.length; i++) {\r\n\t\t\t\tconst division = DIVISIONS[i];\r\n\t\t\t\tif (Math.abs(duration) < division.amount) {\r\n\t\t\t\t\treturn formatter.format(Math.round(duration), division.name);\r\n\t\t\t\t}\r\n\t\t\t\tduration /= division.amount;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nRelativeDatePipe.meta = {\r\n\tname: 'relativeDate',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { ScrollService } from './scroll.service';\r\n\r\nexport class ScrollStickyDirective extends Directive {\r\n\r\n\tsticked_ = false;\r\n\tget sticked() {\r\n\t\treturn this.sticked_;\r\n\t}\r\n\tset sticked(sticked) {\r\n\t\tif (this.sticked_ !== sticked) {\r\n\t\t\tthis.sticked_ = sticked;\r\n\t\t\tif (this.targetNode) {\r\n\t\t\t\tsticked ? this.targetNode.classList.add('sticked') : this.targetNode.classList.remove('sticked');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.targetNode = (this.target ? (node.querySelector(this.target) || node) : node);\r\n\t\tthis.until = this.until ? document.querySelector(this.until) : null;\r\n\t\tconsole.log('ScrollStickyDirective', this.targetNode, this.until);\r\n\t\tthis.sticky$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('ScrollStickyDirective', event);\r\n\t\t});\r\n\t}\r\n\r\n\tsticky$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst targetNode = this.targetNode;\r\n\t\tconst until = this.until;\r\n\t\treturn ScrollService.scroll$.pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconsole.log(event);\r\n\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\tlet y = 0;\r\n\t\t\t\tif (this.bottom) {\r\n\t\t\t\t\tconst bottom = window.innerHeight - targetNode.offsetHeight;\r\n\t\t\t\t\tif (window.innerWidth >= 1024 && rect.y > bottom) {\r\n\t\t\t\t\t\ty = bottom - rect.y;\r\n\t\t\t\t\t\tthis.sticked = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.sticked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst top = event.direction === 'down' ? 80 : 135;\r\n\t\t\t\t\tif (window.innerWidth >= 1024 && rect.y < top) {\r\n\t\t\t\t\t\ty = top - rect.y;\r\n\t\t\t\t\t\tif (until) {\r\n\t\t\t\t\t\t\tconst untilRect = until.getBoundingClientRect();\r\n\t\t\t\t\t\t\tconst height = untilRect.y - rect.y;\r\n\t\t\t\t\t\t\ty = Math.min(height, y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.sticked = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.sticked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(rect.height - targetNode.offsetHeight);\r\n\t\t\t\t// gsap.set(targetNode, { y });\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nScrollStickyDirective.meta = {\r\n\tselector: '[scroll-sticky],[[scroll-sticky]]',\r\n\tinputs: ['target', 'until', 'bottom'],\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport class ShareDirective extends Directive {\r\n\r\n\tget href() {\r\n\t\tswitch (this.share) {\r\n\t\t\tcase 'facebook':\r\n\t\t\t\treturn this.facebookUrl;\r\n\t\t\tcase 'pinterest':\r\n\t\t\t\treturn this.pinterestUrl;\r\n\t\t\tcase 'linkedIn':\r\n\t\t\t\treturn this.linkedInUrl;\r\n\t\t\tcase 'twitter':\r\n\t\t\t\treturn this.twitterUrl;\r\n\t\t\tcase 'whatsapp':\r\n\t\t\t\treturn this.whatsappUrl;\r\n\t\t\tcase 'mailTo':\r\n\t\t\t\treturn this.mailToUrl;\r\n\t\t}\r\n\t}\r\n\r\n\tget facebookUrl() {\r\n\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${this.url}`;\r\n\t}\r\n\r\n\tget pinterestUrl() {\r\n\t\treturn `https://www.pinterest.com/pin/create/button/?url=${this.url}&media=&description=${this.title}`;\r\n\t}\r\n\r\n\tget linkedInUrl() {\r\n\t\treturn `https://www.linkedin.com/shareArticle?mini=true&url=${this.url}&title=${this.title}`;\r\n\t}\r\n\r\n\tget twitterUrl() {\r\n\t\treturn `https://twitter.com/intent/tweet?text=${this.title}%20${this.url}`;\r\n\t}\r\n\r\n\tget whatsappUrl() {\r\n\t\treturn `https://api.whatsapp.com/send?text=${this.url}`;\r\n\t}\r\n\r\n\tget mailToUrl() {\r\n\t\treturn `mailto:?subject=${this.title}&body=${this.url}`;\r\n\t}\r\n\r\n\tget title() {\r\n\t\tconst title = this.shareTitle ? this.shareTitle : document.title;\r\n\t\treturn this.encodeURI(title);\r\n\t}\r\n\r\n\tget url() {\r\n\t\tlet url = this.shareUrl;\r\n\t\tif (url) {\r\n\t\t\tif (url.indexOf(window.location.origin) === -1) {\r\n\t\t\t\turl = window.location.origin + (url.indexOf('/') === 0 ? url : ('/' + url));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\turl = window.location.href;\r\n\t\t}\r\n\t\treturn this.encodeURI(url);\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ShareComponent.onInit', this.share, this.title);\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst href = this.href;\r\n\t\tnode.setAttribute('href', href);\r\n\t\tif (this.share !== 'mailTo') {\r\n\t\t\tnode.setAttribute('target', '_blank');\r\n\t\t\tfromEvent(node, 'click').pipe(\r\n\t\t\t\ttap(event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\twindow.open(href, 'ShareWindow', window.innerWidth >= 768 ? 'width=640,height=480' : '');\r\n\t\t\t\t}),\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe();\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\tconsole.log('ShareComponent.onChanges', this.share, this.shareTitle);\r\n\t}\r\n\t*/\r\n\r\n\tencodeURI(text) {\r\n\t\treturn encodeURIComponent(text).replace(/[!'()*]/g, function(c) {\r\n\t\t\treturn '%' + c.charCodeAt(0).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nShareDirective.meta = {\r\n\tselector: '[share]',\r\n\tinputs: ['share', 'shareUrl', 'shareTitle'],\r\n};\r\n","import { Pipe } from 'rxcomp';\r\nimport { environment } from '../../environment';\r\n\r\nexport class SlugPipe extends Pipe {\r\n\r\n\tstatic transform(key) {\r\n\t\tconst slug = environment.slug;\r\n\t\treturn slug[key] || `#${key}`;\r\n\t}\r\n\r\n}\r\n\r\nSlugPipe.meta = {\r\n\tname: 'slug',\r\n};\r\n","import { getContext, Structure } from 'rxcomp';\r\n\r\nexport class SvgIconStructure extends Structure {\r\n\tonInit() {\r\n\t\tthis.update();\r\n\t}\r\n\tonChanges() {\r\n\t\tthis.update();\r\n\t}\r\n\tupdate() {\r\n\t\tif (this.name_ !== this.name) {\r\n\t\t\tthis.name_ = this.name;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node.parentNode) {\r\n\t\t\t\tconst xmlns = 'http://www.w3.org/2000/svg';\r\n\t\t\t\tconst element = document.createElementNS(xmlns, `svg`);\r\n\t\t\t\tconst w = this.width || 24;\r\n\t\t\t\tconst h = this.height || 24;\r\n\t\t\t\telement.setAttribute('class', `icon--${this.name}`);\r\n\t\t\t\t// element.setAttributeNS(null, 'width', w);\r\n\t\t\t\t// element.setAttributeNS(null, 'height', h);\r\n\t\t\t\telement.setAttributeNS(null, 'viewBox', `0 0 ${w} ${h}`);\r\n\t\t\t\telement.innerHTML = `<use xlink:href=\"#${this.name}\"></use>`;\r\n\t\t\t\telement.rxcompId = node.rxcompId;\r\n\t\t\t\telement.classList.add(...node.classList);\r\n\t\t\t\tnode.parentNode.replaceChild(element, node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSvgIconStructure.meta = {\r\n\tselector: 'svg-icon',\r\n\tinputs: ['name', 'width', 'height']\r\n};\r\n\r\n/*\r\n<svg class=\"copy\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><use xlink:href=\"#copy\"></use></svg>\r\n*/\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\thasPrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\t// console.log('SwiperDirective.hasPrev', swiper.activeIndex, swiper.realIndex, swiper.slides.length);\r\n\t\t\tif (swiper.activeIndex > 0 && swiper.slides.length > swiper.activeIndex) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thasNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (swiper) {\r\n\t\t\tconst slidesPerView = swiper.params.slidesPerView === 'auto' ? 1 : (swiper.params.slidesPerView || 1);\r\n\t\t\t// console.log('SwiperDirective.hasNext', swiper.slides.length, slidesPerView, swiper.activeIndex);\r\n\t\t\tif (swiper.activeIndex < swiper.slides.length - slidesPerView) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tslidePrev() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasPrev()) {\r\n\t\t\t// console.log('SwiperDirective.slidePrev', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tslideNext() {\r\n\t\tconst swiper = this.swiper;\r\n\t\tif (this.hasNext()) {\r\n\t\t\t// console.log('SwiperDirective.slideNext', swiper.activeIndex, swiper.realIndex, swiper.slides);\r\n\t\t\tswiper.slideTo(swiper.activeIndex + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_(target) {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttarget = target || node;\r\n\t\t\tthis.target = target;\r\n\t\t\tgsap.set(target, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tif (swiper) {\r\n\t\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst target = this.target;\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(target, {\r\n\t\t\t\t\t\t\tduration: 0.4,\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(target, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(target, this.options);\r\n\t\t\t\t// console.log(swiper);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\ttarget.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer']\r\n};\r\n","import { fromEvent, of } from 'rxjs';\r\nimport { map, shareReplay } from 'rxjs/operators';\r\n\r\n// <!-- <script id=ta_bootstrapper src='https://gruppoconcorde-cdn.thron.com/shared/plugins/tracking/current/bootstrapper-min.js'></script> -->\r\n// <script src='https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js'></script>\r\n\r\nexport class ThronService {\r\n\r\n\tstatic thron$() {\r\n\t\tlet thron = window.THRONContentExperience || window.THRONPlayer;\r\n\t\tif (thron) {\r\n\t\t\treturn of(thron);\r\n\t\t} else {\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.setAttribute('type', 'text/javascript');\r\n\t\t\tscript.setAttribute('src', 'https://gruppoconcorde-cdn.thron.com/shared/ce/bootstrap/1/scripts/embeds-min.js')\r\n\t\t\tconst loaded$ = fromEvent(script, 'load').pipe(\r\n\t\t\t\t// tap(event => console.log(event, window.THRONContentExperience || window.THRONPlayer)),\r\n\t\t\t\tmap(event => window.THRONContentExperience || window.THRONPlayer),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t\treturn document.head.appendChild(script) && loaded$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, tap } from 'rxjs/operators';\r\nimport { ThronService } from './thron.service';\r\n\r\nlet ID = 0;\r\n\r\nexport class ThronComponent extends Component {\r\n\r\n\tplaying_ = false;\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (node) {\r\n\t\t\t\tplaying ? node.classList.add('playing') : node.classList.remove('playing');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\t// console.log('ThronComponent.onInit');\r\n\t\tthis.init$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tinit$() {\r\n\t\treturn ThronService.thron$().pipe(\r\n\t\t\ttap(THRON => {\r\n\t\t\t\t// const THRON = window.THRONContentExperience || window.THRONPlayer;\r\n\t\t\t\tif (!THRON) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('THRONContentExperience', window.THRONContentExperience, 'THRONPlayer', window.THRONPlayer);\r\n\t\t\t\tconst { node } = getContext(this);\r\n\t\t\t\tconst target = this.target = node.querySelector('.video > .thron');\r\n\t\t\t\tconst id = target.id = `thron-${++ID}`;\r\n\t\t\t\tlet media = this.thron;\r\n\t\t\t\tif (media.indexOf('pkey=') === -1) {\r\n\t\t\t\t\tconst splitted = media.split('/');\r\n\t\t\t\t\tconst clientId = splitted[6];\r\n\t\t\t\t\tconst xcontentId = splitted[7];\r\n\t\t\t\t\tconst pkey = splitted[8];\r\n\t\t\t\t\tmedia = `https://gruppoconcorde-view.thron.com/api/xcontents/resources/delivery/getContentDetail?clientId=${clientId}&xcontentId=${xcontentId}&pkey=${pkey}`;\r\n\t\t\t\t}\r\n\t\t\t\tconst controls = this.controls = node.hasAttribute('controls') ? true : false,\r\n\t\t\t\t\tloop = this.loop = node.hasAttribute('loop') ? true : false,\r\n\t\t\t\t\tautoplay = this.autoplay = node.hasAttribute('autoplay') ? true : false;\r\n\t\t\t\tconst player = this.player = THRON(id, {\r\n\t\t\t\t\tmedia: media,\r\n\t\t\t\t\tloop: loop,\r\n\t\t\t\t\tautoplay: autoplay,\r\n\t\t\t\t\tmuted: !controls,\r\n\t\t\t\t\tdisplayLinked: 'close',\r\n\t\t\t\t\tnoSkin: !controls,\r\n\t\t\t\t\t// lockBitrate: 'max',\r\n\t\t\t\t});\r\n\t\t\t\tthis.onReady = this.onReady.bind(this);\r\n\t\t\t\tthis.onCanPlay = this.onCanPlay.bind(this);\r\n\t\t\t\tthis.onPlaying = this.onPlaying.bind(this);\r\n\t\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\t\tthis.onComplete = this.onComplete.bind(this);\r\n\t\t\t\tplayer.on('ready', this.onReady);\r\n\t\t\t\tplayer.on('canPlay', this.onCanPlay);\r\n\t\t\t\tplayer.on('playing', this.onPlaying);\r\n\t\t\t\tplayer.on('play', this.onPlay);\r\n\t\t\t\tplayer.on('pause', this.onPause);\r\n\t\t\t\tplayer.on('complete', this.onComplete);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonReady() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tif (!this.controls) {\r\n\t\t\tconst mediaContainer = player.mediaContainer();\r\n\t\t\tconst video = mediaContainer.querySelector('video');\r\n\t\t\tvideo.setAttribute('playsinline', 'true');\r\n\t\t\tvideo.setAttribute('autoplay', 'true');\r\n\t\t}\r\n\t\tthis.ready.next(id);\r\n\t\t// video.setAttribute('autoplay', 'true');\r\n\t};\r\n\r\n\tonCanPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onCanPlay', id);\r\n\t\tthis.canPlay.next(id);\r\n\t}\r\n\r\n\tonPlaying() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tplayer.off('playing', this.onPlaying);\r\n\t\tif (!this.controls) {\r\n\t\t\tconst qualities = player.qualityLevels();\r\n\t\t\t// console.log('ThronDirective.onPlaying', id, qualities);\r\n\t\t\tif (qualities.length) {\r\n\t\t\t\tconst highestQuality = qualities[qualities.length - 1].index;\r\n\t\t\t\tconst lowestQuality = qualities[0].index;\r\n\t\t\t\tplayer.currentQuality(highestQuality);\r\n\t\t\t\t// console.log('ThronDirective.onPlaying', id, 'currentQuality', player.currentQuality());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = true;\r\n\t\tthis.play.next(id);\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.pause.next(id);\r\n\t}\r\n\r\n\tonComplete() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\t// console.log('ThronDirective.onComplete', id);\r\n\t\tthis.playing = false;\r\n\t\tthis.complete.next(id);\r\n\t}\r\n\r\n\tplayVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.playVideo', id, status);\r\n\t\tif (status && !status.playing) {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tpauseVideo() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst id = this.target.id;\r\n\t\tconst player = this.player;\r\n\t\tconst status = player.status();\r\n\t\t// console.log('ThronDirective.pauseVideo', id, status);\r\n\t\tif (status && status.playing) {\r\n\t\t\tplayer.pause();\r\n\t\t} else {\r\n\t\t\tplayer.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay(id) {\r\n\t\t// console.log('ThronDirective.play', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause(id) {\r\n\t\t// console.log('ThronDirective.pause', id, id, id === id);\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (id === this.target.id) {\r\n\t\t\tthis.pauseVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tconst player = this.player;\r\n\t\tif (player) {\r\n\t\t\tplayer.off('ready', this.onReady);\r\n\t\t\tplayer.off('canPlay', this.onCanPlay);\r\n\t\t\tplayer.off('playing', this.onPlaying);\r\n\t\t\tplayer.off('play', this.onPlay);\r\n\t\t\tplayer.off('pause', this.onPause);\r\n\t\t\tplayer.off('complete', this.onComplete);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThronComponent.meta = {\r\n\tselector: '[thron],[[thron]]',\r\n\toutputs: ['ready', 'canPlay', 'play', 'pause', 'complete'],\r\n\tinputs: ['thron', 'm3u8'],\r\n\ttemplate: /* html */``,\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\n\r\nexport class TitleDirective extends Directive {\r\n\tset title(title) {\r\n\t\tif (this.title_ !== title) {\r\n\t\t\tthis.title_ = title;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\ttitle ? node.setAttribute('title', title) : node.removeAttribute('title');\r\n\t\t}\r\n\t}\r\n\tget title() {\r\n\t\treturn this.title_;\r\n\t}\r\n}\r\n\r\nTitleDirective.meta = {\r\n\tselector: '[[title]]',\r\n\tinputs: ['title'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { AltDirective } from './alt/alt.directive';\r\nimport { ClickOutsideDirective } from './click-outside/click-outside.directive';\r\nimport { DatePipe } from './date/date.pipe';\r\nimport { DownloadDirective } from './download/download.directive';\r\nimport { DropdownItemDirective } from './dropdown/dropdown-item.directive';\r\nimport { DropdownDirective } from './dropdown/dropdown.directive';\r\nimport { EnvPipe } from './env/env.pipe';\r\nimport { FilterItemComponent } from './filter/filter-item.component';\r\nimport { FlagPipe } from './flag/flag.pipe';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HtmlPipe } from './html/html.pipe';\r\nimport { IdDirective } from './id/id.directive';\r\nimport { LabelForDirective } from './label-for/label-for.directive';\r\nimport { LabelPipe } from './label/label.pipe';\r\nimport { ModalOutletComponent } from './modal/modal-outlet.component';\r\nimport { NameDirective } from './name/name.directive';\r\nimport { NumberPipe } from './number/number.pipe';\r\nimport { RelativeDatePipe } from './relative-date/relative-date.pipe';\r\nimport { ScrollStickyDirective } from './scroll/scroll-sticky.directive';\r\nimport { ShareDirective } from './share/share.directive';\r\nimport { SlugPipe } from './slug/slug.pipe';\r\nimport { SvgIconStructure } from './svg/svg-icon.structure';\r\nimport { SwiperDirective } from './swiper/swiper.directive';\r\nimport { ThronComponent } from './thron/thron.component';\r\nimport { TitleDirective } from './title/title.directive';\r\n\r\nconst factories = [\r\n\tAltDirective,\r\n\tClickOutsideDirective,\r\n\tDownloadDirective,\r\n\t// DropDirective,\r\n\tDropdownDirective,\r\n\tDropdownItemDirective,\r\n\t// DropdownItemDirective,\r\n\tFilterItemComponent,\r\n\tIdDirective,\r\n\tLabelForDirective,\r\n\t// LanguageComponent,\r\n\t// LazyDirective,\r\n\t// ModalComponent,\r\n\tModalOutletComponent,\r\n\tNameDirective,\r\n\tScrollStickyDirective,\r\n\tShareDirective,\r\n\tSvgIconStructure,\r\n\tSwiperDirective,\r\n\tThronComponent,\r\n\tTitleDirective,\r\n\t// UploadItemComponent,\r\n\t// VirtualStructure\r\n];\r\n\r\nconst pipes = [\r\n\tDatePipe,\r\n\tEnvPipe,\r\n\tFlagPipe,\r\n\tHighlightPipe,\r\n\tHtmlPipe,\r\n\tLabelPipe,\r\n\tNumberPipe,\r\n\tRelativeDatePipe,\r\n\tSlugPipe,\r\n];\r\n\r\nexport class CommonModule extends Module { }\r\n\r\nCommonModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nlet UID = 10000;\r\n\r\nexport class ControlComponent extends Component {\r\n\r\n\tget uniqueId() {\r\n\t\treturn this.control.name + this.uid;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.uid = ++UID;\r\n\t\tthis.label = this.label || 'label';\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\t// console.log(this, node, this.control);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { from, fromEvent, merge } from 'rxjs';\r\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../common/modal/modal.service';\r\nimport { environment } from '../environment';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tif (this.target === 'modal') {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.link$().pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t\t).subscribe();\r\n\t\t\t}, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tlink$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst anchors = Array.prototype.slice.call(node.querySelectorAll('a'));\r\n\t\t// console.log(anchors, node.innerHTML);\r\n\t\treturn merge(...anchors.map(anchor => fromEvent(anchor, 'click'))).pipe(\r\n\t\t\tswitchMap(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\t\t\tconst anchor = event.target;\r\n\t\t\t\tconst href = anchor.getAttribute('href');\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.href', href);\r\n\t\t\t\treturn from(fetch(href).then(response => response.text()));\r\n\t\t\t}),\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.html', html);\r\n\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\tconst htmlDocument = parser.parseFromString(html, 'text/html');\r\n\t\t\t\t// console.log('ControlCheckboxComponent.link$.htmlDocument', htmlDocument);\r\n\t\t\t\tlet title = htmlDocument.querySelector('.section--intro-sm .title');\r\n\t\t\t\ttitle = title ? title.innerHTML : null;\r\n\t\t\t\tlet abstract = htmlDocument.querySelector('.section--intro-sm .descritpion');\r\n\t\t\t\tabstract = abstract ? abstract.innerHTML : null;\r\n\t\t\t\tlet description = htmlDocument.querySelector('.section--text .col-md-6');\r\n\t\t\t\tdescription = description ? description.innerHTML : null;\r\n\t\t\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: title, abstract: abstract, description: description } }).pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t\t).subscribe(event => {\r\n\t\t\t\t\t// console.log('ControlCheckboxComponent.link$.genericModal', event);\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label', 'target'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<input [id]=\"uniqueId\" type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t<label [labelFor]=\"uniqueId\">\r\n\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t\t<span class=\"required__sign\">*</span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent, merge } from 'rxjs';\r\nimport { filter, map, shareReplay, startWith } from 'rxjs/operators';\r\n\r\nexport class KeyboardService {\r\n\r\n\tstatic keys = {};\r\n\r\n\tstatic keydown$() {\r\n\t\tif (!this.keydown$_) {\r\n\t\t\tthis.keydown$_ = fromEvent(window, 'keydown').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keydown$_;\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\tif (!this.keyup$_) {\r\n\t\t\tthis.keyup$_ = fromEvent(window, 'keyup').pipe(\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn this.keyup$_;\r\n\t}\r\n\r\n\tstatic keys$() {\r\n\t\tif (!this.keys$_) {\r\n\t\t\tthis.keys$_ = merge(this.keydown$(), this.keyup$()).pipe(\r\n\t\t\t\tmap(event => {\r\n\t\t\t\t\tconst keys = this.keys;\r\n\t\t\t\t\tif (event.type === 'keydown') {\r\n\t\t\t\t\t\tkeys[event.key] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete keys[event.key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.keys;\r\n\t\t\t\t}),\r\n\t\t\t\tstartWith(this.keys),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.keys$_;\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tif (!this.key$_) {\r\n\t\t\tconst regexp = /\\w/;\r\n\t\t\tthis.key$_ = this.keydown$().pipe(\r\n\t\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\t\tmap(event => event.key),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.key$_;\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tif (!this.typing$_) {\r\n\t\t\tlet typing = '',\r\n\t\t\t\tto;\r\n\t\t\tthis.typing$_ = this.key$().pipe(\r\n\t\t\t\tmap(key => {\r\n\t\t\t\t\tif (to) {\r\n\t\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttyping += key;\r\n\t\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\t\ttyping = '';\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t\treturn typing;\r\n\t\t\t\t}),\r\n\t\t\t\tshareReplay(1),\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn this.typing$_;\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DropdownDirective } from '../common/dropdown/dropdown.directive';\r\nimport { KeyboardService } from '../common/keyboard/keyboard.service';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\t// console.log('ControlCustomSelectComponent.onChanges');\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item, this.isMultiple);\r\n\t\tlet value;\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tvalue = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tvalue = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.control.value = value;\r\n\t\tthis.change.next(value);\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = value ? items.find(x => x.id === value || x.name === value) : null;\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.select || 'select'; // LabelPipe.transform('select');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t\tif (this.dropped && $event === null) {\r\n\t\t\tthis.control.touched = true;\r\n\t\t}\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\toutputs: ['change'],\r\n\tinputs: ['control', 'label', 'multiple', 'select'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"control--custom-select\" [innerHTML]=\"getLabel() | label\"></span>\r\n\t\t\t<svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t\t<li (click)=\"setOption(item)\" [class]=\"{ empty: item.id == null }\" *for=\"let item of control.options\">\r\n\t\t\t\t\t<span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name | label\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [labelFor]=\"uniqueId\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<input [id]=\"uniqueId\" type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label for=\"file\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"control--text\" [innerHTML]=\"file?.name || labels.select_file\"></span>\r\n\t\t\t<svg class=\"upload\"><use xlink:href=\"#upload\"></use></svg>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input name=\"file\" type=\"file\" accept=\".pdf,.doc,.docx,*.txt\" class=\"control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (node.hasAttribute('secure')) {\r\n\t\t\t// const name = [...\"abcdefghijklmnopqrsuvwxyz0123456789\"].map((c, i, a) => a[Math.floor(Math.random() * a.length)]).join('');\r\n\t\t\tconst input = node.querySelector('input');\r\n\t\t\tinput.setAttribute('autocomplete', 'new-password');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [labelFor]=\"uniqueId\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<input [id]=\"uniqueId\" type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { from, fromEvent, merge } from 'rxjs';\r\nimport { switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../common/modal/modal.service';\r\nimport { environment } from '../environment';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ControlPrivacyComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tif (this.target === 'modal') {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.link$().pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t\t).subscribe();\r\n\t\t\t}, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst inputs = Array.prototype.slice.call(node.querySelectorAll('input'));\r\n\t\tinputs.forEach((input, i) => {\r\n\t\t\t(this.control.value === true && i === 0) || (this.control.value === false && i === 1) ? input.setAttribute('checked', '') : input.removeAttribute('checked');\r\n\t\t});\r\n\t}\r\n\r\n\tonSelect(value) {\r\n\t\tthis.control.value = value;\r\n\t}\r\n\r\n\tlink$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst anchors = Array.prototype.slice.call(node.querySelectorAll('a'));\r\n\t\t// console.log(anchors, node.innerHTML);\r\n\t\treturn merge(...anchors.map(anchor => fromEvent(anchor, 'click'))).pipe(\r\n\t\t\tswitchMap(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\t\t\tconst anchor = event.target;\r\n\t\t\t\tconst href = anchor.getAttribute('href');\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.href', href);\r\n\t\t\t\treturn from(fetch(href).then(response => response.text()));\r\n\t\t\t}),\r\n\t\t\ttap(html => {\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.html', html);\r\n\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\tconst htmlDocument = parser.parseFromString(html, 'text/html');\r\n\t\t\t\t// console.log('ControlPrivacyComponent.link$.htmlDocument', htmlDocument);\r\n\t\t\t\tlet title = htmlDocument.querySelector('.section--intro-sm .title');\r\n\t\t\t\ttitle = title ? title.innerHTML : null;\r\n\t\t\t\tlet abstract = htmlDocument.querySelector('.section--intro-sm .descritpion');\r\n\t\t\t\tabstract = abstract ? abstract.innerHTML : null;\r\n\t\t\t\tlet description = htmlDocument.querySelector('.section--text .col-md-6');\r\n\t\t\t\tdescription = description ? description.innerHTML : null;\r\n\t\t\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: title, abstract: abstract, description: description } }).pipe(\r\n\t\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t\t).subscribe(event => {\r\n\t\t\t\t\t// console.log('ControlPrivacyComponent.link$.genericModal', event);\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nControlPrivacyComponent.meta = {\r\n\tselector: '[control-privacy]',\r\n\tinputs: ['control', 'label', 'target'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--privacy\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<div class=\"group--inputs\">\r\n\t\t\t\t<input type=\"radio\" class=\"control--checkbox\" [id]=\"uniqueId + '_true'\" [name]=\"uniqueId\" [value]=\"true\" (change)=\"onSelect(true)\" />\r\n\t\t\t\t<label [labelFor]=\"uniqueId + '_true'\">\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t\t<span>Acconsento</span>\r\n\t\t\t\t</label>\r\n\t\t\t\t<input type=\"radio\" class=\"control--checkbox\" [id]=\"uniqueId + '_false'\" [name]=\"uniqueId\" [value]=\"false\" (change)=\"onSelect(false)\" />\r\n\t\t\t\t<label [labelFor]=\"uniqueId + '_false'\">\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox\"><use xlink:href=\"#checkbox\"></use></svg>\r\n\t\t\t\t\t<svg class=\"icon icon--checkbox-checked\"><use xlink:href=\"#checkbox-checked\"></use></svg>\r\n\t\t\t\t\t<span>Non acconsento</span>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"description\">\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t\t<span class=\"required__sign\">*</span>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlSearchComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlSearchComponent.meta = {\r\n\tselector: '[control-search]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<svg class=\"search\"><use xlink:href=\"#search\"></use></svg>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [labelFor]=\"uniqueId\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t\t<input [id]=\"uniqueId\" type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [disabled]=\"disabled\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { ControlComponent } from './control.component';\r\n\r\nexport class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tthis.disabled = this.disabled || false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label', 'disabled'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length, disabled: disabled }\">\r\n\t\t\t<label [labelFor]=\"uniqueId\"><span [innerHTML]=\"label\"></span> <span class=\"required__sign\">*</span></label>\r\n\t\t\t<textarea [id]=\"uniqueId\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" [innerHTML]=\"label\" rows=\"4\" [disabled]=\"disabled\"></textarea>\r\n\t\t\t<span class=\"required__badge\" [innerHTML]=\"'required' | label\"></span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { LabelPipe } from '../common/label/label.pipe';\r\nimport { ControlComponent } from './control.component';\r\n\r\nexport class ErrorsComponent extends ControlComponent {\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = LabelPipe.transform(`error_${key}`);\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class TestComponent extends Component {\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"test-component\" *if=\"!('production' | flag)\">\r\n\t\t<div class=\"test-component__title\">development mode</div>\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--submit\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { ControlCheckboxComponent } from './control-checkbox.component';\r\nimport { ControlCustomSelectComponent } from './control-custom-select.component';\r\nimport { ControlEmailComponent } from './control-email.component';\r\nimport { ControlFileComponent } from './control-file.component';\r\nimport { ControlPasswordComponent } from './control-password.component';\r\nimport { ControlPrivacyComponent } from './control-privacy.component';\r\nimport { ControlSearchComponent } from './control-search.component';\r\nimport { ControlTextComponent } from './control-text.component';\r\nimport { ControlTextareaComponent } from './control-textarea.component';\r\nimport { ErrorsComponent } from './errors.component';\r\nimport { TestComponent } from './test.component';\r\n\r\nconst factories = [\r\n\tControlCheckboxComponent,\r\n\tControlCustomSelectComponent,\r\n\tControlEmailComponent,\r\n\tControlFileComponent,\r\n\tControlPasswordComponent,\r\n\tControlPrivacyComponent,\r\n\t// ControlSelectComponent,\r\n\tControlSearchComponent,\r\n\tControlTextareaComponent,\r\n\tControlTextComponent,\r\n\t// DisabledDirective,\r\n\tErrorsComponent,\r\n\tTestComponent,\r\n\t// ValueDirective,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class ControlsModule extends Module { }\r\n\r\nControlsModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { SwiperDirective } from '../../common/swiper/swiper.directive';\r\n\r\nexport class SwiperMainDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.main-hero__bullets',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tprevEl: '.btn--up',\r\n\t\t\t\tnextEl: '.btn--down',\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperMainDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperMainDirective.meta = {\r\n\tselector: '[swiper-main]'\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport class ErrorComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.showDetail = false;\r\n\t\t// console.log('ErrorComponent.onInit', this.error);\r\n\t}\r\n\r\n\tonDetailToggle() {\r\n\t\tthis.showDetail = !this.showDetail;\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nErrorComponent.meta = {\r\n\tselector: 'error-component',\r\n\tinputs: ['error'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"error\" (click)=\"onDetailToggle($event)\">\r\n\t\t<div class=\"status\">Error <span [innerHTML]=\"error.status\"></span></div>\r\n\t\t<div class=\"exception-message\" [innerHTML]=\"error.exceptionMessage\"></div>\r\n\t\t<button type=\"button\" class=\"btn--detail\"><svg class=\"caret-down\"><use xlink:href=\"#caret-down\"></use></svg></button>\r\n\t</div>\r\n\t<div class=\"error-details\" *if=\"showDetail\">\r\n\t\t<div class=\"message\" [innerHTML]=\"error.message\"></div>\r\n\t\t<div class=\"exception-type\" [innerHTML]=\"error.exceptionType\"></div>\r\n\t\t<div class=\"stack-trace\" [innerHTML]=\"error.stackTrace\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport class MenuService {\r\n\r\n\tstatic menu$_ = new BehaviorSubject(-1);\r\n\r\n\tstatic get currentMenu() {\r\n\t\treturn this.menu$_.getValue();\r\n\t}\r\n\r\n\tstatic setMenu(id) {\r\n\t\tthis.menu$_.next(id);\r\n\t}\r\n\r\n\tstatic toggleMenu(id) {\r\n\t\tthis.menu$_.next(this.currentMenu === id ? -1 : id);\r\n\t}\r\n\r\n\tstatic onBack() {\r\n\t\tthis.menu$_.next(-1);\r\n\t}\r\n\r\n\tstatic menu$() {\r\n\t\treturn this.menu$_;\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { ModalResolveEvent, ModalService } from '../../common/modal/modal.service';\r\nimport { ScrollService } from '../../common/scroll/scroll.service';\r\nimport { environment } from '../../environment';\r\nimport { CartMiniService } from '../cart-mini/cart-mini.service';\r\nimport { MenuService } from '../menu/menu.service';\r\nimport { UserService } from '../user/user.service';\r\nimport { HeaderService } from './header.service';\r\n\r\nconst USE_MODAL = false;\r\n\r\nexport class HeaderComponent extends Component {\r\n\r\n\tdirection_ = null;\r\n\tget direction() {\r\n\t\treturn this.direction_;\r\n\t}\r\n\tset direction(direction) {\r\n\t\tif (this.direction_ !== direction) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tnode.classList.remove(`scrolling-${this.direction_}`);\r\n\t\t\tnode.classList.add(`scrolling-${direction}`);\r\n\t\t\tthis.direction_ = direction;\r\n\t\t}\r\n\t}\r\n\r\n\tscrolled_ = null;\r\n\tget scrolled() {\r\n\t\treturn this.scrolled_;\r\n\t}\r\n\tset scrolled(scrolled) {\r\n\t\tif (this.scrolled_ !== scrolled) {\r\n\t\t\tthis.scrolled_ = scrolled;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tscrolled ? node.classList.add(`scrolled`) : node.classList.remove(`scrolled`);\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tthis.header = HeaderService.currentHeader;\r\n\t\tHeaderService.header$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(header => {\r\n\t\t\tthis.header = header;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tbody.setAttribute('class', header !== -1 ? `${header}-active` : '');\r\n\t\t});\r\n\t\tthis.menu = MenuService.currentMenu;\r\n\t\tMenuService.menu$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(menu => {\r\n\t\t\tthis.menu = menu;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.cart = CartMiniService;\r\n\t\tthis.user = null;\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tconst pictogram = document.querySelector('.page > .pictogram');\r\n\t\tScrollService.scroll$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe((event) => {\r\n\t\t\tthis.direction = event.direction;\r\n\t\t\tthis.scrolled = event.scroll.y > 100;\r\n\t\t\tconst opacity = 0.1 - 0.1 * Math.min(1, Math.max(0, (event.scroll.y - window.innerHeight * 3) / window.innerHeight / 3));\r\n\t\t\tif (pictogram) {\r\n\t\t\t\tgsap.set(pictogram, { opacity });\r\n\t\t\t}\r\n\t\t\t// console.log('HeaderComponent', event.scroll.y, event.direction, event.speed);\r\n\t\t});\r\n\t}\r\n\r\n\tonOpenMarketAndLanguage() {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.onBack();\r\n\t\tModalService.open$({ src: environment.template.modal.marketsAndLanguagesModal }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('HeaderComponent.onOpenMarketAndLanguage', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.onBack();\r\n\t\tif (USE_MODAL) {\r\n\t\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tconsole.log('HeaderComponent.onLogin', event);\r\n\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\twindow.location.href = environment.slug.reservedArea;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogout() {\r\n\t\tUserService.signout$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tonToggle(id) {\r\n\t\tMenuService.onBack();\r\n\t\tHeaderService.toggleHeader(id);\r\n\t}\r\n\r\n\tonBack(event) {\r\n\t\tMenuService.onBack();\r\n\t}\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: '[header]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocationService } from '../../common/location/location.service';\r\n\r\nexport class NewsletterPropositionComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonNewsletter(event) {\r\n\t\tconsole.log('NewsletterPropositionComponent.onNewsletter', this.form.value);\r\n\t\tconst encoded = LocationService.encode('email', this.form.value.email, {});\r\n\t\twindow.location.href = `${this.action}?params=${encoded}`;\r\n\t}\r\n}\r\n\r\nNewsletterPropositionComponent.meta = {\r\n\tselector: '[newsletter-proposition]',\r\n\tinputs: ['action'],\r\n};\r\n","import { Component, getContext } from \"rxcomp\";\r\n\r\nexport class SwitchComponent extends Component {\r\n\r\n\tget path() {\r\n\t\tconst w = 40;\r\n\t\tconst w2 = 60;\r\n\t\tconst h = window.innerHeight;\r\n\t\treturn `path('M0,0 L${w},0 C${w},${h * .25},${w},${h * .75},${w},${h} L${w},${h} L0,${h} L0,0 Z')`;\r\n\t}\r\n\r\n\tget overPath() {\r\n\t\tconst w = 40;\r\n\t\tconst w2 = 60;\r\n\t\tconst h = window.innerHeight;\r\n\t\treturn `path('M0,0 L${w},0 C${w2},${h * .25},${w2},${h * .75},${w},${h} L${w},${h} L0,${h} L0,0 Z')`;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tlet over = false;\r\n\t\tconst onResize = () => {\r\n\t\t\tnode.style.clipPath = over ? this.overPath : this.path;\r\n\t\t};\r\n\t\tconst onOver = () => {\r\n\t\t\tover = true;\r\n\t\t\tgsap.to(node, {\r\n\t\t\t\tduration: 0.5,\r\n\t\t\t\tease: Elastic.easeOut,\r\n\t\t\t\t'clip-path': this.overPath,\r\n\t\t\t});\r\n\t\t};\r\n\t\tconst onOut = () => {\r\n\t\t\tover = false;\r\n\t\t\tgsap.to(node, {\r\n\t\t\t\tduration: 0.5,\r\n\t\t\t\tease: Elastic.easeOut,\r\n\t\t\t\t'clip-path': this.path,\r\n\t\t\t});\r\n\t\t};\r\n\t\tonResize();\r\n\t\twindow.addEventListener('resize', onResize);\r\n\t\tnode.addEventListener('mouseover', onOver);\r\n\t\tnode.addEventListener('mouseout', onOut);\r\n\t}\r\n\r\n}\r\n\r\nSwitchComponent.meta = {\r\n\tselector: '[switch]'\r\n};\r\n\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserDeleteComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tform.patch({ email: user.email }, true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserDeleteComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.delete$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\tswitchMap(_ => UserService.signout$())\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserDeleteComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"AccessData\",\r\n\t\t\t\t\t'form_name': \"AccessData\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserDeleteComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserDeleteComponent.meta = {\r\n\tselector: '[user-delete]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserDetailComponent extends Component {\r\n\r\n\tget countryName() {\r\n\t\tlet countryName = null;\r\n\t\tif (this.user && this.countries.length) {\r\n\t\t\tconst country = this.countries.find(x => x.value === this.user.country);\r\n\t\t\tif (country) {\r\n\t\t\t\tcountryName = country.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn countryName;\r\n\t}\r\n\r\n\tget occupationName() {\r\n\t\tlet occupationName = null;\r\n\t\tif (this.user && this.occupations.length) {\r\n\t\t\tconst occupation = this.occupations.find(x => x.value === this.user.occupation);\r\n\t\t\tif (occupation) {\r\n\t\t\t\toccupationName = occupation.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn occupationName;\r\n\t}\r\n\r\n\tget newsletterLanguageName() {\r\n\t\tlet newsletterLanguageName = null;\r\n\t\tif (this.user && this.newsletterLanguages.length) {\r\n\t\t\tconst newsletterLanguage = this.newsletterLanguages.find(x => x.value === this.user.newsletterLanguage);\r\n\t\t\tif (newsletterLanguage) {\r\n\t\t\t\tnewsletterLanguageName = newsletterLanguage.label;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newsletterLanguageName;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.countries = [];\r\n\t\tthis.occupations = [];\r\n\t\tthis.newsletterLanguages = [];\r\n\t\tthis.gdpr = [];\r\n\t\tUserService.me$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([\r\n\t\t\tUserService.data$(),\r\n\t\t\tUserService.gdpr$(),\r\n\t\t]).pipe(\r\n\t\t\ttap(datas => {\r\n\t\t\t\tconst data = datas[0];\r\n\t\t\t\tthis.countries = data.country.options;\r\n\t\t\t\tthis.occupations = data.occupation.options;\r\n\t\t\t\tthis.newsletterLanguages = data.newsletterLanguage.options;\r\n\t\t\t\tconst gdpr = datas[1];\r\n\t\t\t\tthis.gdpr = gdpr;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonModalUserUpdate(event) {\r\n\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 4 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('UserDetailComponent.onModalSignUp', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonModalGdpr(legalNote) {\r\n\t\t// console.log('UserDetailComponent.onModalUserUpdate');\r\n\t\tModalService.open$({ src: environment.template.modal.genericModal, data: { title: legalNote.title, description: legalNote.description } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('UserDetailComponent.onModalGdpr', event);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nUserDetailComponent.meta = {\r\n\tselector: '[user-detail]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserEditPasswordComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\ttokenEncoded: this.tokenEncoded,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserEditPasswordComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.editPassword$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\tswitchMap(_ => UserService.signout$())\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserEditPasswordComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"EditPassword\",\r\n\t\t\t\t\t'form_name': \"EditPassword\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserEditPasswordComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserEditPasswordComponent.meta = {\r\n\tselector: '[user-edit-password]',\r\n\tinputs: ['tokenEncoded'],\r\n};\r\n","\r\nexport class FormService {\r\n\r\n\tstatic toOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\treturn options;\r\n\t}\r\n\r\n\tstatic toSelectOptions(options) {\r\n\t\toptions = options.slice().map(x => ({ id: x.value, name: x.label }));\r\n\t\toptions.unshift({ id: null, name: 'select' });\r\n\t\treturn options;\r\n\t}\r\n\r\n}\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function RequiredIfValidator(fieldName, formGroup, shouldBe) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tlet field = null;\r\n\t\tif (typeof formGroup === 'function') {\r\n\t\t\tfield = formGroup().get(fieldName);\r\n\t\t} else if (formGroup) {\r\n\t\t\tfield = formGroup.get(fieldName);\r\n\t\t}\r\n\t\treturn (!value && field && (shouldBe != null ? field.value === shouldBe : field.value != null)) ? { required: { value: value, requiredIf: fieldName } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { combineLatest } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserEditComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.user = null;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tthis.responseMessage = null;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\tnewsletter: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcommercial: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpromotion: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest([UserService.data$(), UserService.me$()]).pipe(\r\n\t\t\ttap(results => {\r\n\t\t\t\tconst data = results[0];\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tconst user = results[1];\r\n\t\t\t\tthis.user = user;\r\n\t\t\t\tif (user) {\r\n\t\t\t\t\tconst form = this.form;\r\n\t\t\t\t\tform.patch(user, true);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tprivacy: true,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tthis.responseMessage = null;\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserEditComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.edit$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserEditComponent.onSubmit', response);\r\n\t\t\t\tthis.responseMessage = response.responseMessage;\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\t/*\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\t*/\r\n\t\t\t\tform.reset();\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserEditComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nUserEditComponent.meta = {\r\n\tselector: '[user-edit]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserForgotComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.forgot$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserForgotComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Forgot\",\r\n\t\t\t\t\t'form_name': \"Recupero Password\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.forgot.next(true);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserForgotComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n\r\n\tonSignUp() {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserForgotComponent.meta = {\r\n\tselector: '[user-forgot]',\r\n\toutputs: ['forgot', 'viewSignIn', 'viewSignUp'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { environment } from '../../environment';\r\nimport { UserService, UserViews } from './user.service';\r\n\r\nexport class UserComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = UserViews;\r\n\t\tthis.view = this.view || UserViews.SIGN_UP;\r\n\t}\r\n\r\n\tonModalSignIn(event) {\r\n\t\t// console.log('UserComponent.onModalSignIn');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('UserComponent.onModalSignIn', event);\r\n\t\t});\r\n\t}\r\n\r\n\tonModalSignUp(event) {\r\n\t\t// console.log('UserComponent.onModalSignUp');\r\n\t\tModalService.open$({ src: environment.template.modal.userModal, data: { view: 2, skipAutoClose: true } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tconsole.log('UserComponent.onModalSignUp', event);\r\n\t\t});\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tLocomotiveScrollService.scrollTo(node, { offset: -100 });\r\n\t}\r\n\r\n\tonViewSignIn(event) {\r\n\t\t// console.log('UserComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp(event) {\r\n\t\t// console.log('UserComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonViewForgot(event) {\r\n\t\t// console.log('UserComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('UserComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('UserComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\tif (this.navTo) {\r\n\t\t\twindow.location.href = this.navTo;\r\n\t\t}\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgot(email) {\r\n\t\t/*\r\n\t\tconsole.log('UserComponent.onForgot', email);\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nUserComponent.meta = {\r\n\tselector: '[user]',\r\n\tinputs: ['navTo', 'view']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { ModalOutletComponent } from '../../common/modal/modal-outlet.component';\r\nimport { ModalService } from '../../common/modal/modal.service';\r\nimport { UserComponent } from './user.component';\r\nimport { UserViews } from './user.service';\r\n\r\nexport class UserModalComponent extends UserComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\tthis.me = data.me;\r\n\t\t\tthis.skipAutoClose = data.skipAutoClose;\r\n\t\t\t// console.log('UserModalComponent.onInit', data);\r\n\t\t}\r\n\t\tLocomotiveScrollService.stop();\r\n\t}\r\n\r\n\tsetView(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.pushChanges();\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst target = window.innerWidth >= 1024 ? node.querySelector('.modal__inner') : node;\r\n\t\ttarget.scrollTo(0, 0);\r\n\t}\r\n\r\n\tonViewForgot() {\r\n\t\tconsole.log('UserModalComponent.onViewForgot');\r\n\t\tthis.setView(UserViews.FORGOTTEN);\r\n\t}\r\n\r\n\tonViewSignIn() {\r\n\t\tconsole.log('UserModalComponent.onViewSignIn');\r\n\t\tthis.setView(UserViews.SIGN_IN);\r\n\t}\r\n\r\n\tonViewSignUp() {\r\n\t\tconsole.log('UserModalComponent.onViewSignUp');\r\n\t\tthis.setView(UserViews.SIGN_UP);\r\n\t}\r\n\r\n\tonClose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('UserModalComponent.onSignUp', user);\r\n\t\tif (!this.skipAutoClose) {\r\n\t\t\tModalService.resolve(user);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('UserModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tLocomotiveScrollService.start();\r\n\t}\r\n}\r\n\r\nUserModalComponent.meta = {\r\n\tselector: '[user-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tform.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSigninComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signin$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSigninComponent.onSubmit', response);\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Signin\",\r\n\t\t\t\t\t'form_name': \"Login\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signIn.next(response);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSigninComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\tthis.viewForgot.next();\r\n\t}\r\n\r\n\tonSignUp(event) {\r\n\t\tthis.viewSignUp.next();\r\n\t}\r\n}\r\n\r\nUserSigninComponent.meta = {\r\n\tselector: '[user-signin]',\r\n\toutputs: ['signIn', 'viewForgot', 'viewSignUp'],\r\n};\r\n","import { FormValidator } from 'rxcomp-form';\r\n\r\nexport default function MatchValidator(fieldName, formGroup) {\r\n\r\n\treturn new FormValidator((value) => {\r\n\t\tconst field = formGroup ? formGroup.get(fieldName) : null;\r\n\t\tif (!value || !field) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t});\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { GtmService } from '../../common/gtm/gtm.service';\r\nimport { LocomotiveScrollService } from '../../common/locomotive-scroll/locomotive-scroll.service';\r\nimport { FormService } from '../../controls/form.service';\r\nimport MatchValidator from '../../controls/match.validator';\r\nimport RequiredIfValidator from '../../controls/required-if.validator';\r\nimport { UserService } from './user.service';\r\n\r\nexport class UserSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.me = this.me || {};\r\n\t\tthis.user = this.user || null;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t\tthis.responseMessage = null;\r\n\t\tconst form = this.form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(this.me.firstName || null, [Validators.RequiredValidator()]),\r\n\t\t\tlastName: new FormControl(this.me.lastName || null, [Validators.RequiredValidator()]),\r\n\t\t\tcountry: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcity: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\toccupation: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\temail: new FormControl(this.me.email || null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), MatchValidator('password', form)]),\r\n\t\t\tprivacy: new FormControl(null, [Validators.RequiredTrueValidator()]),\r\n\t\t\tnewsletter: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tcommercial: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpromotion: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewsletterLanguage: new FormControl(null, [RequiredIfValidator('newsletter', form)]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\t\tconst controls = this.controls = form.controls;\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((_) => {\r\n\t\t\tthis.pushChanges();\r\n\t\t\tLocomotiveScrollService.update();\r\n\t\t});\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe();\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn UserService.data$().pipe(\r\n\t\t\ttap(data => {\r\n\t\t\t\tconst controls = this.controls;\r\n\t\t\t\tcontrols.country.options = FormService.toSelectOptions(data.country.options);\r\n\t\t\t\tcontrols.occupation.options = FormService.toSelectOptions(data.occupation.options);\r\n\t\t\t\tcontrols.newsletterLanguage.options = FormService.toSelectOptions(data.newsletterLanguage.options);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttest() {\r\n\t\tconst form = this.form;\r\n\t\tconst controls = this.controls;\r\n\t\tconst country = controls.country.options.length > 1 ? controls.country.options[1].id : null;\r\n\t\tconst occupation = controls.occupation.options.length > 1 ? controls.occupation.options[1].id : null;\r\n\t\tform.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcountry: country,\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\toccupation: occupation,\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: '********',\r\n\t\t\tpasswordConfirm: '********',\r\n\t\t\tprivacy: true,\r\n\t\t\tnewsletter: false,\r\n\t\t\tcommercial: false,\r\n\t\t\tpromotion: false,\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tconst form = this.form;\r\n\t\tform.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tthis.responseMessage = null;\r\n\t\tconst form = this.form;\r\n\t\tconsole.log('UserSignupComponent.onSubmit', form.value);\r\n\t\tif (form.valid) {\r\n\t\t\tform.submitted = true;\r\n\t\t\tUserService.signup$(form.value).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t).subscribe(response => {\r\n\t\t\t\tconsole.log('UserSignupComponent.onSubmit', response);\r\n\t\t\t\tthis.responseMessage = response.responseMessage;\r\n\t\t\t\tthis.success = true;\r\n\t\t\t\tGtmService.push({\r\n\t\t\t\t\t'event': \"Registration\",\r\n\t\t\t\t\t'form_name': \"Registrazione\"\r\n\t\t\t\t});\r\n\t\t\t\tform.reset();\r\n\t\t\t\tthis.signUp.next(response.user);\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log('UserSignupComponent.error', error);\r\n\t\t\t\tthis.error = error;\r\n\t\t\t\tform.submitted = false;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\tLocomotiveScrollService.update();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tform.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn() {\r\n\t\tthis.viewSignIn.next();\r\n\t}\r\n}\r\n\r\nUserSignupComponent.meta = {\r\n\tselector: '[user-signup]',\r\n\toutputs: ['signUp', 'viewSignIn'],\r\n\tinputs: ['me', 'user'],\r\n};\r\n","import { Module } from 'rxcomp';\r\nimport { SwiperMainDirective } from '../partials/swiper-main/swiper-main.directive';\r\nimport { ErrorComponent } from './error/error.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { NewsletterPropositionComponent } from './newsletter-proposition/newsletter-proposition.component';\r\nimport { SwitchComponent } from './switch/switch.component';\r\nimport { UserDeleteComponent } from './user/user-delete.component';\r\nimport { UserDetailComponent } from './user/user-detail.component';\r\nimport { UserEditPasswordComponent } from './user/user-edit-password.component';\r\nimport { UserEditComponent } from './user/user-edit.component';\r\nimport { UserForgotComponent } from './user/user-forgot.component';\r\nimport { UserModalComponent } from './user/user-modal.component';\r\nimport { UserSigninComponent } from './user/user-signin.component';\r\nimport { UserSignupComponent } from './user/user-signup.component';\r\nimport { UserComponent } from './user/user.component';\r\n\r\nconst factories = [\r\n\tErrorComponent,\r\n\tHeaderComponent,\r\n\tNewsletterPropositionComponent,\r\n\tSwiperMainDirective,\r\n\tSwitchComponent,\r\n\tUserComponent,\r\n\tUserDeleteComponent,\r\n\tUserEditComponent,\r\n\tUserEditPasswordComponent,\r\n\tUserForgotComponent,\r\n\tUserModalComponent,\r\n\tUserDetailComponent,\r\n\tUserSigninComponent,\r\n\tUserSignupComponent,\r\n];\r\n\r\nconst pipes = [\r\n];\r\n\r\nexport class SharedModule extends Module { }\r\n\r\nSharedModule.meta = {\r\n\timports: [\r\n\t],\r\n\tdeclarations: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n\texports: [\r\n\t\t...factories,\r\n\t\t...pipes,\r\n\t],\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport { AppComponent } from './app.component';\r\nimport { CommonModule } from './common/common.module';\r\nimport { ControlsModule } from './controls/controls.module';\r\nimport { SharedModule } from './shared/shared.module';\r\n\r\nexport class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t\tCommonModule,\r\n\t\tControlsModule,\r\n\t\tSharedModule,\r\n\t],\r\n\tdeclarations: [\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport { AppModule } from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}